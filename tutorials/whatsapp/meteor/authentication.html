<!DOCTYPE html><html lang="en"><head>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,800,700italic,800italic" rel="stylesheet" type="text/css">
	<link href="https://fonts.googleapis.com/css?family=Poppins:400,700" rel="stylesheet">

	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <title>Tutorial | WhatsApp Clone with Meteor CLI and Ionic | Authentication</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="icon" href="data:;base64,iVBORw0KGgo=">
  <meta name="google-site-verification" content="CRBoDT1qxdDxv-sysHgNqqEy9Ijc-fybbmM2VhOUv3w">
  <base href="/">

  <meta name="description" content="On this step we will authenticate and identify users in our app. Before we go ahead and start extending our app, we will add few packages which will m">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <meta name="keywords" content="realtime, backend, websockets, graphql, apollo, angular, angular 2, meteor, Angular Bindings, realtime sync, browser, mobile, build apps fast, completely realtime, build collaborative apps, real-time, MEAN stack, JSON data, Easy authentication, oAuth, Real-time Synchronization. angular stack, MongoDB, Node.js, Authentication">
  <link rel="shortcut icon" href="assets/images/favicon.ico" type="image/x-icon">
  <link rel="icon" href="assets/images/favicon.ico" type="image/x-icon">
  <link rel="alternate" type="application/rss+xml" title="Meteor Blog RSS Feed" href="http://info.meteor.com/blog/rss.xml">
  <link rel="author" href="https://plus.google.com/105270147965228044669">
  <link href="https://plus.google.com/104063475472216743156" rel="publisher">
  <meta name="twitter:creator" content="@urigoldshtein">
  <link rel="profile" href="http://angular-meteor.com">
  <meta property="os:repo" content="https://github.com/urigo/angular-meteor">
  <meta property="os:rcs_type" content="git">
  <meta property="os:src" content="git@github.com:urigo/angular-meteor.git">
  <script type="text/javascript">
    var host = "angular-meteor.com";
    if ((host == window.location.host) && (window.location.protocol != "https:"))
      window.location.protocol = "https";
  </script>
  <script>
    (function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.fitvids=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";var selectors=['iframe[src*="player.vimeo.com"]','iframe[src*="youtube.com"]','iframe[src*="youtube-nocookie.com"]','iframe[src*="kickstarter.com"][src*="video.html"]',"object"];var css=".fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}";module.exports=function(parentSelector,opts){parentSelector=parentSelector||"body";opts=opts||{};if(isObject(parentSelector)){opts=parentSelector;parentSelector="body"}opts.ignore=opts.ignore||"";opts.players=opts.players||"";var containers=queryAll(parentSelector);if(!hasLength(containers))return;if(!document.getElementById("fit-vids-style")){var head=document.head||document.getElementsByTagName("head")[0];head.appendChild(styles())}var custom=toSelectorArray(opts.players)||[];var ignored=toSelectorArray(opts.ignore)||[];var selector=selectors.filter(notIgnored(ignored)).concat(custom).join();if(!hasLength(selector))return;containers.forEach(function(container){var videos=queryAll(container,selector);videos.forEach(function(video){wrap(video)})})};function queryAll(el,selector){if(typeof el==="string"){selector=el;el=document}return Array.prototype.slice.call(el.querySelectorAll(selector))}function toSelectorArray(input){if(typeof input==="string"){return input.split(",").map(trim).filter(hasLength)}else if(isArray(input)){return flatten(input.map(toSelectorArray).filter(hasLength))}return input||[]}function wrap(el){if(/fluid-width-video-wrapper/.test(el.parentNode.className))return;var widthAttr=parseInt(el.getAttribute("width"),10);var heightAttr=parseInt(el.getAttribute("height"),10);var width=!isNaN(widthAttr)?widthAttr:el.clientWidth;var height=!isNaN(heightAttr)?heightAttr:el.clientHeight;var aspect=height/width;el.removeAttribute("width");el.removeAttribute("height");var wrapper=document.createElement("div");el.parentNode.insertBefore(wrapper,el);wrapper.className="fluid-width-video-wrapper";wrapper.style.paddingTop=aspect*100+"%";wrapper.appendChild(el)}function styles(){var div=document.createElement("div");div.innerHTML='<p>x</p><style id="fit-vids-style">'+css+"</style>";return div.childNodes[1]}function notIgnored(ignored){if(ignored.length<1){return function(){return true}}return function(selector){return ignored.indexOf(selector)===-1}}function hasLength(input){return input.length>0}function trim(str){return str.replace(/^\s+|\s+$/g,"")}function flatten(input){return[].concat.apply([],input)}function isObject(input){return Object.prototype.toString.call(input)==="[object Object]"}function isArray(input){return Object.prototype.toString.call(input)==="[object Array]"}},{}]},{},[1])(1)});
  </script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Fix for CSS load delay
      document.body.style.display = "block";

      // Tutorials dropdown
      var navToggle = document.querySelector('.nav-toggle');
      var navLinks = document.querySelector('.nav-links');

      var dropdown = document.querySelector('.tutorials-dropdown');
      var dropdownContent = document.querySelector('.dropdown-content');

      navToggle.addEventListener('click', function() {
        navLinks.classList.toggle('visible');
      });

      dropdown.addEventListener('click', function() {
        dropdownContent.classList.toggle('visible');
	    });

      // Fix for youtube
	    fitvids('.youtube-container');

	    // Command line code snippet
      document.querySelectorAll('.tutorial-content pre code').forEach(function(item){
        item.addEventListener('click', function(event) {
          var target = event.target;
          var width = target.offsetWidth;
          var dollarIndex = target.innerText.indexOf('$ ');

          if (dollarIndex > -1) {
            var inputElement = document.createElement('textarea');
            inputElement.innerHTML = target.innerText.replace(/\r?\n/g, '\n').replace(/\n$/, "").trim();
            var linesCounts = inputElement.innerHTML.split("\n").length;
            inputElement.setAttribute("spellcheck", "false");
            inputElement.setAttribute("rows", linesCounts);
            var startIndex = dollarIndex;
            var endIndex = inputElement.value.length;

            if (target.innerText.trim().indexOf("\n") > -1) {
              endIndex = target.innerText.trim().indexOf("\n");
            }

            window.setTimeout(function () {
              inputElement.setSelectionRange(startIndex + 2, endIndex);
            }, 0);

            inputElement.className = 'terminal-input';
            inputElement.style.width = width + 'px';
            inputElement.style.lineHeight = window.getComputedStyle(target, null).getPropertyValue('line-height');

            var t = target.parentNode.replaceChild(inputElement, target);

            inputElement.addEventListener('blur', function() {
              inputElement.parentNode.replaceChild(t, inputElement);
            });

            inputElement.focus();
          }
        });
      });

    }, false);
  </script>
<style>/** * Mixin that creates a new stacking context. * see https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context */ /** * This mixin hides an element visually. * That means it's still accessible for screen-readers but not visible in view. */ /** * Forces an element to grow to fit floated contents; used as as an alternative to * `overflow: hidden;` because it doesn't cut off contents. */ /** * A mixin, which generates temporary ink ripple on a given component. * When $bindToParent is set to true, it will check for the focused class on the same selector as you included * that mixin. * It is also possible to specify the color palette of the temporary ripple. By default it uses the * accent palette for its background. */ md-toolbar { display: flex; box-sizing: border-box; width: 100%; min-height: 64px; font-size: 20px; font-weight: 400; font-family: Roboto, "Helvetica Neue", sans-serif; padding: 0 16px; flex-direction: column; background: whitesmoke; color: rgba(0, 0, 0, 0.87); } md-toolbar.md-primary { background: #009688; color: white; } md-toolbar.md-accent { background: #9c27b0; color: rgba(255, 255, 255, 0.870588); } md-toolbar.md-warn { background: #f44336; color: white; } md-toolbar md-toolbar-row { display: flex; box-sizing: border-box; width: 100%; height: 64px; flex-direction: row; align-items: center; } /*# sourceMappingURL=toolbar.css.map */ </style><style>/** * A collection of mixins and CSS classes that can be used to apply elevation to a material * element. * See: https://www.google.com/design/spec/what-is-material/elevation-shadows.html * Examples: * * * .md-foo { *   @include $md-elevation(2); * *   &:active { *     @include $md-elevation(8); *   } * } * * <div id="external-card" class="md-elevation-z2"><p>Some content</p></div> * * For an explanation of the design behind how elevation is implemented, see the design doc at * https://goo.gl/Kq0k9Z. */ /** * The css property used for elevation. In most cases this should not be changed. It is exposed * as a variable for abstraction / easy use when needing to reference the property directly, for * example in a will-change rule. */ /** The default duration value for elevation transitions. */ /** The default easing value for elevation transitions. */ /** * Applies the correct css rules to an element to give it the elevation specified by $zValue. * The $zValue must be between 0 and 24. */ /** * Returns a string that can be used as the value for a transition property for elevation. * Calling this function directly is useful in situations where a component needs to transition * more than one property. * * .foo { *   transition: md-elevation-transition-property-value(), opacity 100ms ease; *   will-change: $md-elevation-property, opacity; * } */ /** * Applies the correct css rules needed to have an element transition between elevations. * This mixin should be applied to elements whose elevation values will change depending on their * context (e.g. when active or disabled). */ /** * This mixin overrides default button styles like the gray background, * the border, and the outline. */ /** Applies a property to an md-button element for each of the supported palettes. */ /** Applies a focus style to an md-button element for each of the supported palettes. */ [md-raised-button], [md-fab], [md-mini-fab], [md-button], [md-icon-button] { box-sizing: border-box; position: relative; background: transparent; cursor: pointer; user-select: none; outline: none; border: none; display: inline-block; white-space: nowrap; text-decoration: none; vertical-align: baseline; font-size: 14px; font-family: Roboto, "Helvetica Neue", sans-serif; font-weight: 500; color: currentColor; text-align: center; margin: 0; min-width: 88px; line-height: 36px; padding: 0 16px; border-radius: 3px; } .md-primary[md-raised-button], .md-primary[md-fab], .md-primary[md-mini-fab], .md-primary[md-button], .md-primary[md-icon-button] { color: #009688; } .md-accent[md-raised-button], .md-accent[md-fab], .md-accent[md-mini-fab], .md-accent[md-button], .md-accent[md-icon-button] { color: #9c27b0; } .md-warn[md-raised-button], .md-warn[md-fab], .md-warn[md-mini-fab], .md-warn[md-button], .md-warn[md-icon-button] { color: #f44336; } .md-primary[disabled][md-raised-button], .md-primary[disabled][md-fab], .md-primary[disabled][md-mini-fab], .md-primary[disabled][md-button], .md-primary[disabled][md-icon-button], .md-accent[disabled][md-raised-button], .md-accent[disabled][md-fab], .md-accent[disabled][md-mini-fab], .md-accent[disabled][md-button], .md-accent[disabled][md-icon-button], .md-warn[disabled][md-raised-button], .md-warn[disabled][md-fab], .md-warn[disabled][md-mini-fab], .md-warn[disabled][md-button], .md-warn[disabled][md-icon-button], [disabled][disabled][md-raised-button], [disabled][disabled][md-fab], [disabled][disabled][md-mini-fab], [disabled][disabled][md-button], [disabled][disabled][md-icon-button] { color: rgba(0, 0, 0, 0.38); } [disabled][md-raised-button], [disabled][md-fab], [disabled][md-mini-fab], [disabled][md-button], [disabled][md-icon-button] { cursor: default; } .md-button-focus[md-raised-button]::after, .md-button-focus[md-fab]::after, .md-button-focus[md-mini-fab]::after, .md-button-focus[md-button]::after, .md-button-focus[md-icon-button]::after { position: absolute; top: 0; left: 0; bottom: 0; right: 0; content: ''; background-color: rgba(0, 0, 0, 0.12); border-radius: inherit; pointer-events: none; } .md-button-focus.md-primary[md-raised-button]::after, .md-button-focus.md-primary[md-fab]::after, .md-button-focus.md-primary[md-mini-fab]::after, .md-button-focus.md-primary[md-button]::after, .md-button-focus.md-primary[md-icon-button]::after { background-color: rgba(0, 150, 136, 0.12); } .md-button-focus.md-accent[md-raised-button]::after, .md-button-focus.md-accent[md-fab]::after, .md-button-focus.md-accent[md-mini-fab]::after, .md-button-focus.md-accent[md-button]::after, .md-button-focus.md-accent[md-icon-button]::after { background-color: rgba(156, 39, 176, 0.12); } .md-button-focus.md-warn[md-raised-button]::after, .md-button-focus.md-warn[md-fab]::after, .md-button-focus.md-warn[md-mini-fab]::after, .md-button-focus.md-warn[md-button]::after, .md-button-focus.md-warn[md-icon-button]::after { background-color: rgba(244, 67, 54, 0.12); } [md-raised-button], [md-fab], [md-mini-fab] { box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); background-color: #fafafa; transform: translate3d(0, 0, 0); transition: background 400ms cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1); } .md-primary[md-raised-button], .md-primary[md-fab], .md-primary[md-mini-fab] { color: white; } .md-accent[md-raised-button], .md-accent[md-fab], .md-accent[md-mini-fab] { color: rgba(255, 255, 255, 0.870588); } .md-warn[md-raised-button], .md-warn[md-fab], .md-warn[md-mini-fab] { color: white; } .md-primary[disabled][md-raised-button], .md-primary[disabled][md-fab], .md-primary[disabled][md-mini-fab], .md-accent[disabled][md-raised-button], .md-accent[disabled][md-fab], .md-accent[disabled][md-mini-fab], .md-warn[disabled][md-raised-button], .md-warn[disabled][md-fab], .md-warn[disabled][md-mini-fab], [disabled][disabled][md-raised-button], [disabled][disabled][md-fab], [disabled][disabled][md-mini-fab] { color: rgba(0, 0, 0, 0.38); } .md-primary[md-raised-button], .md-primary[md-fab], .md-primary[md-mini-fab] { background-color: #009688; } .md-accent[md-raised-button], .md-accent[md-fab], .md-accent[md-mini-fab] { background-color: #9c27b0; } .md-warn[md-raised-button], .md-warn[md-fab], .md-warn[md-mini-fab] { background-color: #f44336; } .md-primary[disabled][md-raised-button], .md-primary[disabled][md-fab], .md-primary[disabled][md-mini-fab], .md-accent[disabled][md-raised-button], .md-accent[disabled][md-fab], .md-accent[disabled][md-mini-fab], .md-warn[disabled][md-raised-button], .md-warn[disabled][md-fab], .md-warn[disabled][md-mini-fab], [disabled][disabled][md-raised-button], [disabled][disabled][md-fab], [disabled][disabled][md-mini-fab] { background-color: rgba(0, 0, 0, 0.12); } [md-raised-button]:active, [md-fab]:active, [md-mini-fab]:active { box-shadow: 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12); } [disabled][md-raised-button], [disabled][md-fab], [disabled][md-mini-fab] { box-shadow: none; } [md-button]:hover::after, [md-icon-button]:hover::after { position: absolute; top: 0; left: 0; bottom: 0; right: 0; content: ''; background-color: rgba(0, 0, 0, 0.12); border-radius: inherit; pointer-events: none; } [md-button]:hover.md-primary::after, [md-icon-button]:hover.md-primary::after { background-color: rgba(0, 150, 136, 0.12); } [md-button]:hover.md-accent::after, [md-icon-button]:hover.md-accent::after { background-color: rgba(156, 39, 176, 0.12); } [md-button]:hover.md-warn::after, [md-icon-button]:hover.md-warn::after { background-color: rgba(244, 67, 54, 0.12); } [md-button][disabled]:hover.md-primary, [md-button][disabled]:hover.md-accent, [md-button][disabled]:hover.md-warn, [md-button][disabled]:hover::after, [md-icon-button][disabled]:hover.md-primary, [md-icon-button][disabled]:hover.md-accent, [md-icon-button][disabled]:hover.md-warn, [md-icon-button][disabled]:hover::after { background-color: transparent; } [md-fab] { min-width: 0; border-radius: 50%; background-color: #9c27b0; color: rgba(255, 255, 255, 0.870588); width: 56px; height: 56px; padding: 0; } [md-fab] i, [md-fab] md-icon { padding: 16px 0; } [md-mini-fab] { min-width: 0; border-radius: 50%; background-color: #9c27b0; color: rgba(255, 255, 255, 0.870588); width: 40px; height: 40px; padding: 0; } [md-mini-fab] i, [md-mini-fab] md-icon { padding: 8px 0; } [md-icon-button] { min-width: 0; padding: 0; width: 40px; height: 40px; line-height: 24px; border-radius: 50%; } [md-icon-button] .md-button-wrapper > * { vertical-align: middle; } .md-button-ripple { position: absolute; top: 0; left: 0; bottom: 0; right: 0; } .md-button-ripple-round { border-radius: 50%; z-index: 1; } @media screen and (-ms-high-contrast: active) { .md-raised-button, .md-fab, .md-mini-fab { border: 1px solid #fff; } } /*# sourceMappingURL=button.css.map */ </style><style>.diffbox[_ngcontent-35] {
  border: 1px solid #eee;
  -webkit-text-size-adjust: 100%;
  margin: 1.5em 0;
}
.diffbox[_ngcontent-35]   .title-panel[_ngcontent-35] {
  padding: 5px 12px;
  background: #eee;
  border-bottom: solid 1px #eee;
  color: #333;
  overflow: auto;
  font-size: .875rem;
}
.diffbox[_ngcontent-35]   .title-panel[_ngcontent-35]   .github-commit-link[_ngcontent-35] {
  float: right;
  color: black;
  text-decoration: none;
  border-bottom: none !important;
}
.diffbox[_ngcontent-35]   .code-container[_ngcontent-35] {
  overflow-x: auto;
  position: relative;
  padding: 9px 3px 3px 0;
  background: #f8f8f8;
}
.diffbox[_ngcontent-35]   .code-container[_ngcontent-35]   .scroll-container[_ngcontent-35] {
  display: inline-block;
  min-width: 100%;
  overflow: hidden;
}
.diffbox[_ngcontent-35]   .code-container[_ngcontent-35]:hover    > .improve-code[_ngcontent-35] {
  display: block;
}
.diffbox[_ngcontent-35]   .code-container[_ngcontent-35]   .improve-code[_ngcontent-35] {
  display: none;
  position: absolute;
  bottom: 0;
  right: 0;
  background: rgba(255, 255, 255, 0.5);
  padding: 5px;
  cursor: pointer;
}
.diffbox[_ngcontent-35]   .code-container[_ngcontent-35]   .line-numbers[_ngcontent-35] {
  text-align: right;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -o-user-select: none;
  position: absolute;
  width: 25px;
}
.diffbox[_ngcontent-35]   .code-container[_ngcontent-35]   .line-numbers[_ngcontent-35]   .line-number[_ngcontent-35] {
  color: #aaa;
  font-style: italic;
  margin: 0 !important;
}</style><style>/** The width/height of the icon element. */ /** This works because we're using ViewEncapsulation.None. If we used the default encapsulation, the selector would need to be ":host". */ md-icon { background-repeat: no-repeat; display: inline-block; fill: currentColor; height: 24px; width: 24px; } /*# sourceMappingURL=icon.css.map */ </style></head>

<body style="display: none;">
  <a href="https://github.com/urigo/angular-meteor/"><img style="position: fixed; top: 0; right: 0; border: 0; z-index: 2000;" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"></a>

  <app><md-toolbar class="main-toolbar md-primary"><div class="md-toolbar-layout"> <md-toolbar-row> 
  <a class="logo-link" href=""><img class="logo" src="assets/images/logo-large.png"></a>

  <button class="nav-toggle" md-icon-button=""><span class="md-button-wrapper">
    <i class="material-icons">menu</i>
  </span> </button>

  <nav class="nav-links">
    <div class="primary-nav">
      <div class="tutorials-dropdown">
        <button md-button=""><span class="md-button-wrapper"><span class="button-inner">Tutorials<i class="material-icons">arrow_drop_down</i></span>
        </span> </button>
        <div class="dropdown-content">
          <steps-list prefix="tutorials/whatsapp2">
<!--template bindings={}--><ul class="tutorial-steps-list">
    <!--template bindings={}--><li class="step-item">
        <a class="step-link" href="tutorials/whatsapp2/ionic/setup">1. Bootstrapping</a>
    </li><li class="step-item">
        <a class="step-link" href="tutorials/whatsapp2/ionic/chats-page">2. Chats page</a>
    </li><li class="step-item">
        <a class="step-link" href="tutorials/whatsapp2/ionic/rxjs">3. RxJS</a>
    </li><li class="step-item">
        <a class="step-link" href="tutorials/whatsapp2/ionic/meteor-server-side">4. Realtime Meteor Server</a>
    </li><li class="step-item">
        <a class="step-link" href="tutorials/whatsapp2/ionic/folder-structure">5. Folder Structure</a>
    </li><li class="step-item">
        <a class="step-link" href="tutorials/whatsapp2/ionic/messages-page">6. Messages Page</a>
    </li><li class="step-item">
        <a class="step-link" href="tutorials/whatsapp2/ionic/authentication">7. Users &amp; Authentication</a>
    </li><li class="step-item">
        <a class="step-link" href="tutorials/whatsapp2/ionic/chats-mutations">8. Chats Creation &amp; Removal</a>
    </li><li class="step-item">
        <a class="step-link" href="tutorials/whatsapp2/ionic/privacy">9. Privacy &amp; Subscriptions</a>
    </li><li class="step-item">
        <a class="step-link" href="tutorials/whatsapp2/ionic/filter-and-pagination">10. Filter &amp; Pagination</a>
    </li><li class="step-item">
        <a class="step-link" href="tutorials/whatsapp2/ionic/android-testing">11. Android testing</a>
    </li><li class="step-item">
        <a class="step-link" href="tutorials/whatsapp2/ionic/google-maps">12. Google Maps &amp; Geolocation</a>
    </li><li class="step-item">
        <a class="step-link" href="tutorials/whatsapp2/ionic/file-upload">13. File Upload &amp; Images</a>
    </li><li class="step-item">
        <a class="step-link" href="tutorials/whatsapp2/ionic/native-mobile">14. Native Mobile</a>
    </li><li class="step-item">
        <a class="step-link" href="tutorials/whatsapp2/ionic/addressbook">15. Addressbook integration</a>
    </li><li class="step-item">
        <a class="step-link" href="tutorials/whatsapp2/ionic/push-notifications">16. FCM Push Notifications</a>
    </li><li class="step-item">
        <a class="step-link" href="tutorials/whatsapp2/ionic/facebook">17. Facebook authentication</a>
    </li><li class="step-item">
        <a class="step-link" href="tutorials/whatsapp2/ionic/summary">18. Summary</a>
    </li>
    <!--template bindings={}--><li class="step-item extra-item">
        <a class="step-link extra-link bold" className="step-link extra-link bold" href="tutorials/whatsapp2-tutorial">WhatsApp clone with Angular &amp; Meteor</a>
    </li><li class="step-item extra-item">
        <a class="step-link extra-link bold" className="step-link extra-link bold" href="tutorials/migration/angular2/introduction">Blaze to Angular 2 Migration tutorial</a>
    </li><li class="step-item extra-item">
        <a class="step-link extra-link bold" className="step-link extra-link bold" href="tutorials/socially/angular2/bootstrap">Old Socially Tutorials</a>
    </li><li class="step-item extra-item">
        <a class="step-link extra-link bold" className="step-link extra-link bold" href="training">Custom Training</a>
    </li>
</ul></steps-list>
        </div>
      </div>
      <a href="api/angular2-meteor/latest/Meteor-RxJS">
        <button md-button=""><span class="md-button-wrapper">API Reference</span> </button>
      </a>
      <a href="meteor-rxjs">
        <button md-button=""><span class="md-button-wrapper">Meteor+RxJS</span> </button>
      </a>
    </div>
    <div class="secondary-nav">
      <a href="http://info.meteor.com/blog/author/uri-goldshtein?__hstc=219992390.b4a81f3b906b078dac633307097097f5.1471207723059.1471890076881.1471938647239.7&amp;__hssc=219992390.3.1471938647239&amp;__hsfp=714783454" target="_blank">
        <button md-button=""><span class="md-button-wrapper">Blog</span> </button>
      </a>
      <a class="support-link" href="support">
        <button md-button=""><span class="md-button-wrapper">Support</span> </button>
        
      </a>
      <a href="consulting">
        <button md-button=""><span class="md-button-wrapper">Consulting</span> </button>
      </a>
      <a href="manifesto">
        <button md-button=""><span class="md-button-wrapper">Manifesto</span> </button>
      </a>
    </div>
  </nav>
 </md-toolbar-row>  </div></md-toolbar>
<router-outlet></router-outlet><tutorial><div class="tutorials-container">
  <!--template bindings={}--><div class="tutorial-title">
    <h1>WhatsApp Clone with Meteor CLI and Ionic</h1>
    <h5 class="gh-link"><a target="_blank" href="https://github.com/Urigo/Ionic-MeteorCLI-WhatsApp"><md-icon fontIcon="fa-github" fontSet="fa" role="img" class="fa fa-github" aria-label="fa-github"></md-icon>https://github.com/Urigo/Ionic-MeteorCLI-WhatsApp</a></h5>
    <!--template bindings={}-->
  </div>
  <!--template bindings={}-->
  <!--template bindings={}-->
  <div class="tutorial-inner-container">
    <nav class="side-nav l-pinned-left l-layer-4 l-offset-nav">
      <tutorials-versions><!--template bindings={}-->
</tutorials-versions>
      <steps-list>
<!--template bindings={}--><ul class="tutorial-steps-list">
    <!--template bindings={}--><li class="step-item">
        <a class="step-link" href="/tutorials/whatsapp/meteor/bootstrapping">1. Bootstrapping</a>
    </li><li class="step-item">
        <a class="step-link" href="/tutorials/whatsapp/meteor/layout">2. Layout, coding style &amp; structure</a>
    </li><li class="step-item">
        <a class="step-link" href="/tutorials/whatsapp/meteor/realtime-meteor-server">3. Realtime Meteor server</a>
    </li><li class="step-item">
        <a class="step-link" href="/tutorials/whatsapp/meteor/meteor-server-methods">4. Chat view and send messages</a>
    </li><li class="step-item active-step">
        <a class="step-link" href="/tutorials/whatsapp/meteor/authentication">5. Authentication</a>
    </li><li class="step-item">
        <a class="step-link" href="/tutorials/whatsapp/meteor/modify-chats">6. Create and remove chats</a>
    </li><li class="step-item">
        <a class="step-link" href="/tutorials/whatsapp/meteor/privacy">7. Privacy</a>
    </li><li class="step-item">
        <a class="step-link" href="/tutorials/whatsapp/meteor/user-profile-picture">8. User profile picture</a>
    </li><li class="step-item">
        <a class="step-link" href="/tutorials/whatsapp/meteor/image-upload">9. Send image messages</a>
    </li><li class="step-item">
        <a class="step-link" href="/tutorials/whatsapp/meteor/summary">10. Summary</a>
    </li>
    <!--template bindings={}-->
</ul></steps-list>
    </nav>
    <div class="tutorial-content">
      <div class="top-navigation">
        <div class="tutorial-nav">
          <a class="md-primary tutorial-button" md-raised-button="" tutorialNavigation="previous" aria-disabled="false" href="/tutorials/whatsapp/meteor/meteor-server-methods"><span class="md-button-wrapper">
            <span class="button-wrapper"><i class="material-icons">navigate_before</i>Previous</span>
          </span> </a>
          <a class="md-primary tutorial-button" codeDiffLink="" md-raised-button="" aria-disabled="false" href="https://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/compare/step4...step5"><span class="md-button-wrapper">
            <span class="button-wrapper"><i class="material-icons">search</i>Code Diff</span>
          </span> </a>
          <a class="md-primary tutorial-button" md-raised-button="" tutorialNavigation="next" aria-disabled="false" href="/tutorials/whatsapp/meteor/modify-chats"><span class="md-button-wrapper">
            <span class="button-wrapper right-icon">Next<i class="material-icons">navigate_next</i></span>
          </span> </a>
        </div>

        <div class="improve">
          <a class="md-primary improv-button tutorial-button" md-raised-button="" href="https://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/edit/master/manuals/templates/step4.md" aria-disabled="false"><span class="md-button-wrapper">
            <span class="button-wrapper"><i class="material-icons">mode_edit</i>Improve This Tutorial</span>
          </span> </a>
        </div>
      </div>
      <h1 class="tutorial-title" stepName="">Authentication</h1>
      <a class="zip-download" stepDownloadZip="" href="https://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/archive/step4.zip">
        Note: If you skipped ahead to this section, click here to download a zip of the tutorial at this point.
      </a>
      <!--template bindings={}-->
      <router-outlet></router-outlet><tutorial-page><div class="tutorial-container"></div></tutorial-page><tutorial-container><p>On this step we will authenticate and identify users in our app.</p>
<p>Before we go ahead and start extending our app, we will add few packages which will make our lives a bit less complex when it comes to authentication and users management.</p>
<p>First we will add a <code>Meteor</code> package called <code>accounts-phone</code> which gives us the ability to verify a user using an SMS code:</p>
<pre><code>$ meteor add npm-bcrypt@0.8.7
$ meteor add mys:accounts-phone
</code></pre><p>And second, we will add <code>angular-meteor-auth</code> which provides us with authentication related functions:</p>
<pre><code>$ meteor npm install angular-meteor-auth
</code></pre><p>Of course, don't forget to load the relevant modules:</p>
<diffbox step="4.3" tutorial="whatsapp-meteor-tutorial" _nghost-35="">
<!--template bindings={}--><div _ngcontent-35="">
  <!--template bindings={}--><div _ngcontent-35="" class="diffbox">
    <div _ngcontent-35="" class="title-panel">
      <span _ngcontent-35="" class="step-number">4.3</span> <span _ngcontent-35="" class="commit-summary">Load angular-meteor-auth module</span>
      <a _ngcontent-35="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/commit/f2cbd829b7df3dc666a8b0ad925a527165042e72">client/scripts/lib/app.js</a>
    </div>
    <div _ngcontent-35="" class="code-container">
      <div _ngcontent-35="" class="scroll-container">
        <div _ngcontent-35="" class="line-numbers">
          <!--template bindings={}--><pre _ngcontent-35="" class="line-number">1</pre><pre _ngcontent-35="" class="line-number">2</pre><pre _ngcontent-35="" class="line-number">3</pre><pre _ngcontent-35="" class="line-number">4</pre><pre _ngcontent-35="" class="line-number">5</pre><pre _ngcontent-35="" class="line-number">6</pre><pre _ngcontent-35="" class="line-number">7</pre><pre _ngcontent-35="" class="line-number"> </pre><pre _ngcontent-35="" class="line-number">22</pre><pre _ngcontent-35="" class="line-number">23</pre><pre _ngcontent-35="" class="line-number">24</pre><pre _ngcontent-35="" class="line-number">25</pre><pre _ngcontent-35="" class="line-number">26</pre><pre _ngcontent-35="" class="line-number">27</pre><pre _ngcontent-35="" class="line-number">28</pre>
        </div>
        <div _ngcontent-35="" class="line-content"></div><diffbox-container><pre class="line-context"><span class="hljs-comment">// Libs</span></pre><pre class="line-context"><span class="hljs-keyword">import</span> <span class="hljs-string">'angular-animate'</span>;</pre><pre class="line-context"><span class="hljs-keyword">import</span> <span class="hljs-string">'angular-meteor'</span>;</pre><pre class="line-added"><span class="hljs-keyword">import</span> <span class="hljs-string">'angular-meteor-auth'</span>;</pre><pre class="line-context"><span class="hljs-keyword">import</span> <span class="hljs-string">'angular-moment'</span>;</pre><pre class="line-context"><span class="hljs-keyword">import</span> <span class="hljs-string">'angular-sanitize'</span>;</pre><pre class="line-context"><span class="hljs-keyword">import</span> <span class="hljs-string">'angular-ui-router'</span>;</pre><pre class="undefined"><span class="hljs-comment">...some lines skipped...</span></pre><pre class="line-context"><span class="hljs-comment">// App</span></pre><pre class="line-context">Angular.module(App, [</pre><pre class="line-context">  <span class="hljs-string">'angular-meteor'</span>,</pre><pre class="line-added">  <span class="hljs-string">'angular-meteor.auth'</span>,</pre><pre class="line-context">  <span class="hljs-string">'angularMoment'</span>,</pre><pre class="line-context">  <span class="hljs-string">'ionic'</span></pre><pre class="line-context">]);</pre></diffbox-container>
      </div>
      <!--template bindings={}--><div _ngcontent-35="" class="improve-code">
        <a _ngcontent-35="" href="https://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/edit/master/manuals/views/step4.md">Improve this code</a>
      </div>
    </div>
  </div>
</div></diffbox>

<p>In order to make the SMS verification work we will need to create a file located in <code>server/sms.js</code> with the following contents:</p>
<diffbox step="4.4" tutorial="whatsapp-meteor-tutorial" _nghost-35="">
<!--template bindings={}--><div _ngcontent-35="">
  <!--template bindings={}--><div _ngcontent-35="" class="diffbox">
    <div _ngcontent-35="" class="title-panel">
      <span _ngcontent-35="" class="step-number">4.4</span> <span _ngcontent-35="" class="commit-summary">Add SMS configuration</span>
      <a _ngcontent-35="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/commit/a7f3f8b85a5a74fec2b810ccb9d5321883499756">server/sms.js</a>
    </div>
    <div _ngcontent-35="" class="code-container">
      <div _ngcontent-35="" class="scroll-container">
        <div _ngcontent-35="" class="line-numbers">
          <!--template bindings={}--><pre _ngcontent-35="" class="line-number">1</pre><pre _ngcontent-35="" class="line-number">2</pre><pre _ngcontent-35="" class="line-number">3</pre><pre _ngcontent-35="" class="line-number">4</pre><pre _ngcontent-35="" class="line-number">5</pre><pre _ngcontent-35="" class="line-number">6</pre><pre _ngcontent-35="" class="line-number">7</pre>
        </div>
        <div _ngcontent-35="" class="line-content"></div><diffbox-container><pre class="line-added"><span class="hljs-keyword">import</span> <span>{</span> Meteor <span>}</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'meteor/meteor'</span>;</pre><pre class="line-added"><span class="hljs-keyword">import</span> <span>{</span> Accounts <span>}</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'meteor/accounts-base'</span>;</pre><pre class="line-added"> </pre><pre class="line-added"><span class="hljs-keyword">if</span> (Meteor.settings &amp;&amp; Meteor.settings.ACCOUNTS_PHONE) <span>{</span></pre><pre class="line-added">  Accounts._options.adminPhoneNumbers = Meteor.settings.ACCOUNTS_PHONE.ADMIN_NUMBERS;</pre><pre class="line-added">  Accounts._options.phoneVerificationMasterCode = Meteor.settings.ACCOUNTS_PHONE.MASTER_CODE;</pre><pre class="line-added"><span>}</span></pre></diffbox-container>
      </div>
      <!--template bindings={}--><div _ngcontent-35="" class="improve-code">
        <a _ngcontent-35="" href="https://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/edit/master/manuals/views/step4.md">Improve this code</a>
      </div>
    </div>
  </div>
</div></diffbox>

<p>If you would like to test the verification with a real phone number, <code>accouts-phone</code> provides an easy access for <a href="https://www.twilio.com/">twilio's API</a>, for more information see <a href="https://github.com/okland/accounts-phone">accounts-phone's repo</a>.</p>
<p>For debugging purposes if you'd like to add admin phone numbers and mater verification codes which will always pass the verification stage, you may add a <code>settings.json</code> file at the root folder with the following fields:</p>
<pre><code><span>{</span>
  "ACCOUNTS_PHONE": <span>{</span>
    "ADMIN_NUMBERS": ["123456789", "987654321"],
    "MASTER_CODE": "1234"
  <span>}</span>
<span>}</span>
</code></pre><p>Now let's create the same flow of <code>Whatsapp</code> for authentication: first we need to ask for the user's phone number, verify it with an SMS message and then ask the user to pick his name.</p>
<p>So these flows are created by 3 views: login, confirmation and profile.</p>
<p>Let's add these states, each with HTML template and controller:</p>
<diffbox step="4.5" tutorial="whatsapp-meteor-tutorial" _nghost-35="">
<!--template bindings={}--><div _ngcontent-35="">
  <!--template bindings={}--><div _ngcontent-35="" class="diffbox">
    <div _ngcontent-35="" class="title-panel">
      <span _ngcontent-35="" class="step-number">4.5</span> <span _ngcontent-35="" class="commit-summary">Create auth route states</span>
      <a _ngcontent-35="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/commit/3857f94c2b7f0c8f38211a3bafb1882018c514fb">client/scripts/routes.js</a>
    </div>
    <div _ngcontent-35="" class="code-container">
      <div _ngcontent-35="" class="scroll-container">
        <div _ngcontent-35="" class="line-numbers">
          <!--template bindings={}--><pre _ngcontent-35="" class="line-number">2</pre><pre _ngcontent-35="" class="line-number">3</pre><pre _ngcontent-35="" class="line-number">4</pre><pre _ngcontent-35="" class="line-number">5</pre><pre _ngcontent-35="" class="line-number">6</pre><pre _ngcontent-35="" class="line-number">7</pre><pre _ngcontent-35="" class="line-number">8</pre><pre _ngcontent-35="" class="line-number">9</pre><pre _ngcontent-35="" class="line-number">10</pre><pre _ngcontent-35="" class="line-number"> </pre><pre _ngcontent-35="" class="line-number">32</pre><pre _ngcontent-35="" class="line-number">33</pre><pre _ngcontent-35="" class="line-number">34</pre><pre _ngcontent-35="" class="line-number">35</pre><pre _ngcontent-35="" class="line-number">36</pre><pre _ngcontent-35="" class="line-number">37</pre><pre _ngcontent-35="" class="line-number">38</pre><pre _ngcontent-35="" class="line-number">39</pre><pre _ngcontent-35="" class="line-number">40</pre><pre _ngcontent-35="" class="line-number">41</pre><pre _ngcontent-35="" class="line-number">42</pre><pre _ngcontent-35="" class="line-number">43</pre><pre _ngcontent-35="" class="line-number">44</pre><pre _ngcontent-35="" class="line-number">45</pre><pre _ngcontent-35="" class="line-number">46</pre><pre _ngcontent-35="" class="line-number">47</pre><pre _ngcontent-35="" class="line-number">48</pre><pre _ngcontent-35="" class="line-number">49</pre><pre _ngcontent-35="" class="line-number">50</pre><pre _ngcontent-35="" class="line-number">51</pre><pre _ngcontent-35="" class="line-number">52</pre>
        </div>
        <div _ngcontent-35="" class="line-content"></div><diffbox-container><pre class="line-context"> </pre><pre class="line-context"><span class="hljs-keyword">import</span> chatsTemplateUrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../templates/chats.html'</span>;</pre><pre class="line-context"><span class="hljs-keyword">import</span> chatTemplateUrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../templates/chat.html'</span>;</pre><pre class="line-added"><span class="hljs-keyword">import</span> confirmationTemplateUrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../templates/confirmation.html'</span>;</pre><pre class="line-added"><span class="hljs-keyword">import</span> loginTemplateUrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../templates/login.html'</span>;</pre><pre class="line-added"><span class="hljs-keyword">import</span> profileTemplateUrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../templates/profile.html'</span>;</pre><pre class="line-context"><span class="hljs-keyword">import</span> tabsTemplateUrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../templates/tabs.html'</span>;</pre><pre class="line-context"> </pre><pre class="line-context"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RoutesConfig</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Config</span> </span><span>{</span></pre><pre class="undefined"><span class="hljs-comment">...some lines skipped...</span></pre><pre class="line-context">            controller: <span class="hljs-string">'ChatCtrl as chat'</span></pre><pre class="line-context">          <span>}</span></pre><pre class="line-context">        <span>}</span></pre><pre class="line-added">      <span>}</span>)</pre><pre class="line-added">      .state(<span class="hljs-string">'login'</span>, <span>{</span></pre><pre class="line-added">        url: <span class="hljs-string">'/login'</span>,</pre><pre class="line-added">        templateUrl: loginTemplateUrl,</pre><pre class="line-added">        controller: <span class="hljs-string">'LoginCtrl as logger'</span></pre><pre class="line-added">      <span>}</span>)</pre><pre class="line-added">      .state(<span class="hljs-string">'confirmation'</span>, <span>{</span></pre><pre class="line-added">        url: <span class="hljs-string">'/confirmation/:phone'</span>,</pre><pre class="line-added">        templateUrl: confirmationTemplateUrl,</pre><pre class="line-added">        controller: <span class="hljs-string">'ConfirmationCtrl as confirmation'</span></pre><pre class="line-added">      <span>}</span>)</pre><pre class="line-added">      .state(<span class="hljs-string">'profile'</span>, <span>{</span></pre><pre class="line-added">        url: <span class="hljs-string">'/profile'</span>,</pre><pre class="line-added">        templateUrl: profileTemplateUrl,</pre><pre class="line-added">        controller: <span class="hljs-string">'ProfileCtrl as profile'</span></pre><pre class="line-context">      <span>}</span>);</pre><pre class="line-context"> </pre><pre class="line-context">    <span class="hljs-keyword">this</span>.$urlRouterProvider.otherwise(<span class="hljs-string">'tab/chats'</span>);</pre></diffbox-container>
      </div>
      <!--template bindings={}--><div _ngcontent-35="" class="improve-code">
        <a _ngcontent-35="" href="https://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/edit/master/manuals/views/step4.md">Improve this code</a>
      </div>
    </div>
  </div>
</div></diffbox>

<p>We will now add the view of login state which includes an input and a save button and later we will add a modal dialog to verify the user's phone:</p>
<diffbox step="4.6" tutorial="whatsapp-meteor-tutorial" _nghost-35="">
<!--template bindings={}--><div _ngcontent-35="">
  <!--template bindings={}--><div _ngcontent-35="" class="diffbox">
    <div _ngcontent-35="" class="title-panel">
      <span _ngcontent-35="" class="step-number">4.6</span> <span _ngcontent-35="" class="commit-summary">Add login view</span>
      <a _ngcontent-35="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/commit/6b7e87f7d6c65bebc17ee5a50e41089f1207028c">client/templates/login.html</a>
    </div>
    <div _ngcontent-35="" class="code-container">
      <div _ngcontent-35="" class="scroll-container">
        <div _ngcontent-35="" class="line-numbers">
          <!--template bindings={}--><pre _ngcontent-35="" class="line-number">1</pre><pre _ngcontent-35="" class="line-number">2</pre><pre _ngcontent-35="" class="line-number">3</pre><pre _ngcontent-35="" class="line-number">4</pre><pre _ngcontent-35="" class="line-number">5</pre><pre _ngcontent-35="" class="line-number">6</pre><pre _ngcontent-35="" class="line-number">7</pre><pre _ngcontent-35="" class="line-number">8</pre><pre _ngcontent-35="" class="line-number">9</pre><pre _ngcontent-35="" class="line-number">10</pre><pre _ngcontent-35="" class="line-number">11</pre><pre _ngcontent-35="" class="line-number">12</pre><pre _ngcontent-35="" class="line-number">13</pre><pre _ngcontent-35="" class="line-number">14</pre><pre _ngcontent-35="" class="line-number">15</pre>
        </div>
        <div _ngcontent-35="" class="line-content"></div><diffbox-container><pre class="line-added"><span class="hljs-tag">&lt;<span class="hljs-name">ion-view</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"Your phone number"</span>&gt;</span></pre><pre class="line-added">  <span class="hljs-tag">&lt;<span class="hljs-name">ion-nav-buttons</span> <span class="hljs-attr">side</span>=<span class="hljs-string">"right"</span>&gt;</span></pre><pre class="line-added">    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">ng-click</span>=<span class="hljs-string">"logger.login()"</span> <span class="hljs-attr">ng-disabled</span>=<span class="hljs-string">"!logger.phone || logger.phone.length === 0"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button button-clear button-positive"</span>&gt;</span>Done<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></pre><pre class="line-added">  <span class="hljs-tag">&lt;/<span class="hljs-name">ion-nav-buttons</span>&gt;</span></pre><pre class="line-added">  <span class="hljs-tag">&lt;<span class="hljs-name">ion-content</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"login"</span>&gt;</span></pre><pre class="line-added">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-center instructions"</span>&gt;</span></pre><pre class="line-added">      Please confirm your country code and enter your phone number</pre><pre class="line-added">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre><pre class="line-added">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"list"</span>&gt;</span></pre><pre class="line-added">      <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item item-input"</span>&gt;</span></pre><pre class="line-added">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ng-model</span>=<span class="hljs-string">"logger.phone"</span> <span class="hljs-attr">on-return</span>=<span class="hljs-string">"logger.login()"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"Your phone number"</span>&gt;</span></pre><pre class="line-added">      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></pre><pre class="line-added">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre><pre class="line-added">  <span class="hljs-tag">&lt;/<span class="hljs-name">ion-content</span>&gt;</span></pre><pre class="line-added"><span class="hljs-tag">&lt;/<span class="hljs-name">ion-view</span>&gt;</span></pre></diffbox-container>
      </div>
      <!--template bindings={}--><div _ngcontent-35="" class="improve-code">
        <a _ngcontent-35="" href="https://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/edit/master/manuals/views/step4.md">Improve this code</a>
      </div>
    </div>
  </div>
</div></diffbox>

<p>And for the controller the logic is simple, we ask the user to check again his phone number, and then we will use <code>Accounts</code> API in order to ask for SMS verification:</p>
<diffbox step="4.7" tutorial="whatsapp-meteor-tutorial" _nghost-35="">
<!--template bindings={}--><div _ngcontent-35="">
  <!--template bindings={}--><div _ngcontent-35="" class="diffbox">
    <div _ngcontent-35="" class="title-panel">
      <span _ngcontent-35="" class="step-number">4.7</span> <span _ngcontent-35="" class="commit-summary">Add login controller</span>
      <a _ngcontent-35="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/commit/a4dfce1040e62267259d9c7d36c441c3fd55e763">client/scripts/controllers/login.controller.js</a>
    </div>
    <div _ngcontent-35="" class="code-container">
      <div _ngcontent-35="" class="scroll-container">
        <div _ngcontent-35="" class="line-numbers">
          <!--template bindings={}--><pre _ngcontent-35="" class="line-number">1</pre><pre _ngcontent-35="" class="line-number">2</pre><pre _ngcontent-35="" class="line-number">3</pre><pre _ngcontent-35="" class="line-number">4</pre><pre _ngcontent-35="" class="line-number">5</pre><pre _ngcontent-35="" class="line-number">6</pre><pre _ngcontent-35="" class="line-number">7</pre><pre _ngcontent-35="" class="line-number">8</pre><pre _ngcontent-35="" class="line-number">9</pre><pre _ngcontent-35="" class="line-number">10</pre><pre _ngcontent-35="" class="line-number">11</pre><pre _ngcontent-35="" class="line-number">12</pre><pre _ngcontent-35="" class="line-number">13</pre><pre _ngcontent-35="" class="line-number">14</pre><pre _ngcontent-35="" class="line-number">15</pre><pre _ngcontent-35="" class="line-number">16</pre><pre _ngcontent-35="" class="line-number">17</pre><pre _ngcontent-35="" class="line-number">18</pre><pre _ngcontent-35="" class="line-number">19</pre><pre _ngcontent-35="" class="line-number">20</pre><pre _ngcontent-35="" class="line-number">21</pre><pre _ngcontent-35="" class="line-number">22</pre><pre _ngcontent-35="" class="line-number">23</pre><pre _ngcontent-35="" class="line-number">24</pre><pre _ngcontent-35="" class="line-number">25</pre><pre _ngcontent-35="" class="line-number">26</pre><pre _ngcontent-35="" class="line-number">27</pre><pre _ngcontent-35="" class="line-number">28</pre><pre _ngcontent-35="" class="line-number">29</pre><pre _ngcontent-35="" class="line-number">30</pre><pre _ngcontent-35="" class="line-number">31</pre><pre _ngcontent-35="" class="line-number">32</pre><pre _ngcontent-35="" class="line-number">33</pre><pre _ngcontent-35="" class="line-number">34</pre><pre _ngcontent-35="" class="line-number">35</pre><pre _ngcontent-35="" class="line-number">36</pre><pre _ngcontent-35="" class="line-number">37</pre><pre _ngcontent-35="" class="line-number">38</pre><pre _ngcontent-35="" class="line-number">39</pre><pre _ngcontent-35="" class="line-number">40</pre><pre _ngcontent-35="" class="line-number">41</pre><pre _ngcontent-35="" class="line-number">42</pre><pre _ngcontent-35="" class="line-number">43</pre><pre _ngcontent-35="" class="line-number">44</pre><pre _ngcontent-35="" class="line-number">45</pre><pre _ngcontent-35="" class="line-number">46</pre>
        </div>
        <div _ngcontent-35="" class="line-content"></div><diffbox-container><pre class="line-added"><span class="hljs-keyword">import</span> <span>{</span> _ <span>}</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'meteor/underscore'</span>;</pre><pre class="line-added"><span class="hljs-keyword">import</span> <span>{</span> Accounts <span>}</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'meteor/accounts-base'</span>;</pre><pre class="line-added"><span class="hljs-keyword">import</span> <span>{</span> Controller <span>}</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'angular-ecmascript/module-helpers'</span>;</pre><pre class="line-added"> </pre><pre class="line-added"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginCtrl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span> </span><span>{</span></pre><pre class="line-added">  login() <span>{</span></pre><pre class="line-added">    <span class="hljs-keyword">if</span> (_.isEmpty(<span class="hljs-keyword">this</span>.phone)) <span class="hljs-keyword">return</span>;</pre><pre class="line-added"> </pre><pre class="line-added">    <span class="hljs-keyword">const</span> confirmPopup = <span class="hljs-keyword">this</span>.$ionicPopup.confirm(<span>{</span></pre><pre class="line-added">      title: <span class="hljs-string">'Number confirmation'</span>,</pre><pre class="line-added">      template: <span class="hljs-string">'&lt;div&gt;'</span> + <span class="hljs-keyword">this</span>.phone + <span class="hljs-string">'&lt;/div&gt;&lt;div&gt;Is your phone number above correct?&lt;/div&gt;'</span>,</pre><pre class="line-added">      cssClass: <span class="hljs-string">'text-center'</span>,</pre><pre class="line-added">      okText: <span class="hljs-string">'Yes'</span>,</pre><pre class="line-added">      okType: <span class="hljs-string">'button-positive button-clear'</span>,</pre><pre class="line-added">      cancelText: <span class="hljs-string">'edit'</span>,</pre><pre class="line-added">      cancelType: <span class="hljs-string">'button-dark button-clear'</span></pre><pre class="line-added">    <span>}</span>);</pre><pre class="line-added"> </pre><pre class="line-added">    confirmPopup.then(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> <span>{</span></pre><pre class="line-added">      <span class="hljs-keyword">if</span> (!res) <span class="hljs-keyword">return</span>;</pre><pre class="line-added"> </pre><pre class="line-added">      <span class="hljs-keyword">this</span>.$ionicLoading.show(<span>{</span></pre><pre class="line-added">        template: <span class="hljs-string">'Sending verification code...'</span></pre><pre class="line-added">      <span>}</span>);</pre><pre class="line-added"> </pre><pre class="line-added">      Accounts.requestPhoneVerification(<span class="hljs-keyword">this</span>.phone, (err) =&gt; <span>{</span></pre><pre class="line-added">        <span class="hljs-keyword">this</span>.$ionicLoading.hide();</pre><pre class="line-added">        <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.handleError(err);</pre><pre class="line-added">        <span class="hljs-keyword">this</span>.$state.go(<span class="hljs-string">'confirmation'</span>, <span>{</span> <span class="hljs-attr">phone</span>: <span class="hljs-keyword">this</span>.phone <span>}</span>);</pre><pre class="line-added">      <span>}</span>);</pre><pre class="line-added">    <span>}</span>);</pre><pre class="line-added">  <span>}</span></pre><pre class="line-added"> </pre><pre class="line-added">  handleError(err) <span>{</span></pre><pre class="line-added">    <span class="hljs-keyword">this</span>.$log.error(<span class="hljs-string">'Login error '</span>, err);</pre><pre class="line-added"> </pre><pre class="line-added">    <span class="hljs-keyword">this</span>.$ionicPopup.alert(<span>{</span></pre><pre class="line-added">      title: err.reason || <span class="hljs-string">'Login failed'</span>,</pre><pre class="line-added">      template: <span class="hljs-string">'Please try again'</span>,</pre><pre class="line-added">      okType: <span class="hljs-string">'button-positive button-clear'</span></pre><pre class="line-added">    <span>}</span>);</pre><pre class="line-added">  <span>}</span></pre><pre class="line-added"><span>}</span></pre><pre class="line-added"> </pre><pre class="line-added">LoginCtrl.$name = <span class="hljs-string">'LoginCtrl'</span>;</pre><pre class="line-added">LoginCtrl.$inject = [<span class="hljs-string">'$state'</span>, <span class="hljs-string">'$ionicLoading'</span>, <span class="hljs-string">'$ionicPopup'</span>, <span class="hljs-string">'$log'</span>];</pre></diffbox-container>
      </div>
      <!--template bindings={}--><div _ngcontent-35="" class="improve-code">
        <a _ngcontent-35="" href="https://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/edit/master/manuals/views/step4.md">Improve this code</a>
      </div>
    </div>
  </div>
</div></diffbox>

<diffbox step="4.8" tutorial="whatsapp-meteor-tutorial" _nghost-35="">
<!--template bindings={}--><div _ngcontent-35="">
  <!--template bindings={}--><div _ngcontent-35="" class="diffbox">
    <div _ngcontent-35="" class="title-panel">
      <span _ngcontent-35="" class="step-number">4.8</span> <span _ngcontent-35="" class="commit-summary">Load login controller</span>
      <a _ngcontent-35="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/commit/11d3b9084f42c2076f09e04737cdc3d1bb35116e">client/scripts/lib/app.js</a>
    </div>
    <div _ngcontent-35="" class="code-container">
      <div _ngcontent-35="" class="scroll-container">
        <div _ngcontent-35="" class="line-numbers">
          <!--template bindings={}--><pre _ngcontent-35="" class="line-number">13</pre><pre _ngcontent-35="" class="line-number">14</pre><pre _ngcontent-35="" class="line-number">15</pre><pre _ngcontent-35="" class="line-number">16</pre><pre _ngcontent-35="" class="line-number">17</pre><pre _ngcontent-35="" class="line-number">18</pre><pre _ngcontent-35="" class="line-number">19</pre><pre _ngcontent-35="" class="line-number"> </pre><pre _ngcontent-35="" class="line-number">31</pre><pre _ngcontent-35="" class="line-number">32</pre><pre _ngcontent-35="" class="line-number">33</pre><pre _ngcontent-35="" class="line-number">34</pre><pre _ngcontent-35="" class="line-number">35</pre><pre _ngcontent-35="" class="line-number">36</pre><pre _ngcontent-35="" class="line-number">37</pre>
        </div>
        <div _ngcontent-35="" class="line-content"></div><diffbox-container><pre class="line-context"><span class="hljs-comment">// Modules</span></pre><pre class="line-context"><span class="hljs-keyword">import</span> ChatsCtrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../controllers/chats.controller'</span>;</pre><pre class="line-context"><span class="hljs-keyword">import</span> ChatCtrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../controllers/chat.controller'</span>;</pre><pre class="line-added"><span class="hljs-keyword">import</span> LoginCtrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../controllers/login.controller'</span>;</pre><pre class="line-context"><span class="hljs-keyword">import</span> InputDirective <span class="hljs-keyword">from</span> <span class="hljs-string">'../directives/input.directive'</span>;</pre><pre class="line-context"><span class="hljs-keyword">import</span> CalendarFilter <span class="hljs-keyword">from</span> <span class="hljs-string">'../filters/calendar.filter'</span>;</pre><pre class="line-context"><span class="hljs-keyword">import</span> RoutesConfig <span class="hljs-keyword">from</span> <span class="hljs-string">'../routes'</span>;</pre><pre class="undefined"><span class="hljs-comment">...some lines skipped...</span></pre><pre class="line-context"><span class="hljs-keyword">new</span> Loader(App)</pre><pre class="line-context">  .load(ChatsCtrl)</pre><pre class="line-context">  .load(ChatCtrl)</pre><pre class="line-added">  .load(LoginCtrl)</pre><pre class="line-context">  .load(InputDirective)</pre><pre class="line-context">  .load(CalendarFilter)</pre><pre class="line-context">  .load(RoutesConfig);</pre></diffbox-container>
      </div>
      <!--template bindings={}--><div _ngcontent-35="" class="improve-code">
        <a _ngcontent-35="" href="https://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/edit/master/manuals/views/step4.md">Improve this code</a>
      </div>
    </div>
  </div>
</div></diffbox>

<p>Note that we didn't provide all the settings for <code>account-phone</code>, so it will run in debug mode. It means that a real SMS won't be sent now, but if you'd like to receive the verification code just open your terminal and view <code>Meteor</code>'s logs.</p>
<p>Our next step would be preventing unauthorized users from viewing contents which they have no permission to. In order to do that we will add a pre-requirement to the relevant routes which will require the user to log-in first. <code>angular-meteor-auth</code> provides us with a service which is called <code>$auth</code>, and it has a method called <code>$awaitUser()</code> which returns a promise that will be resolved only once the user has logged in. For more information about <code>angular-meteor-auth</code> see <a href="http://www.angular-meteor.com/api/1.3.6/auth">reference</a>.</p>
<diffbox step="4.9" tutorial="whatsapp-meteor-tutorial" _nghost-35="">
<!--template bindings={}--><div _ngcontent-35="">
  <!--template bindings={}--><div _ngcontent-35="" class="diffbox">
    <div _ngcontent-35="" class="title-panel">
      <span _ngcontent-35="" class="step-number">4.9</span> <span _ngcontent-35="" class="commit-summary">Add resolve to auth routes</span>
      <a _ngcontent-35="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/commit/77faaf8a3eca7118e367bfb2cafddc96da7e2de6">client/scripts/routes.js</a>
    </div>
    <div _ngcontent-35="" class="code-container">
      <div _ngcontent-35="" class="scroll-container">
        <div _ngcontent-35="" class="line-numbers">
          <!--template bindings={}--><pre _ngcontent-35="" class="line-number">8</pre><pre _ngcontent-35="" class="line-number">9</pre><pre _ngcontent-35="" class="line-number">10</pre><pre _ngcontent-35="" class="line-number">11</pre><pre _ngcontent-35="" class="line-number">12</pre><pre _ngcontent-35="" class="line-number">13</pre><pre _ngcontent-35="" class="line-number">14</pre><pre _ngcontent-35="" class="line-number">15</pre><pre _ngcontent-35="" class="line-number">16</pre><pre _ngcontent-35="" class="line-number">17</pre><pre _ngcontent-35="" class="line-number">18</pre><pre _ngcontent-35="" class="line-number">19</pre><pre _ngcontent-35="" class="line-number">20</pre><pre _ngcontent-35="" class="line-number">21</pre><pre _ngcontent-35="" class="line-number">22</pre><pre _ngcontent-35="" class="line-number">23</pre><pre _ngcontent-35="" class="line-number">24</pre><pre _ngcontent-35="" class="line-number">25</pre><pre _ngcontent-35="" class="line-number">26</pre><pre _ngcontent-35="" class="line-number">27</pre><pre _ngcontent-35="" class="line-number">28</pre><pre _ngcontent-35="" class="line-number"> </pre><pre _ngcontent-35="" class="line-number">55</pre><pre _ngcontent-35="" class="line-number">56</pre><pre _ngcontent-35="" class="line-number">57</pre><pre _ngcontent-35="" class="line-number">58</pre><pre _ngcontent-35="" class="line-number">59</pre><pre _ngcontent-35="" class="line-number">60</pre><pre _ngcontent-35="" class="line-number">61</pre><pre _ngcontent-35="" class="line-number">62</pre><pre _ngcontent-35="" class="line-number">63</pre><pre _ngcontent-35="" class="line-number">64</pre><pre _ngcontent-35="" class="line-number">65</pre><pre _ngcontent-35="" class="line-number">66</pre><pre _ngcontent-35="" class="line-number">67</pre><pre _ngcontent-35="" class="line-number">68</pre><pre _ngcontent-35="" class="line-number">69</pre><pre _ngcontent-35="" class="line-number">70</pre><pre _ngcontent-35="" class="line-number">71</pre><pre _ngcontent-35="" class="line-number">72</pre>
        </div>
        <div _ngcontent-35="" class="line-content"></div><diffbox-container><pre class="line-context"><span class="hljs-keyword">import</span> tabsTemplateUrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../templates/tabs.html'</span>;</pre><pre class="line-context"> </pre><pre class="line-context"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RoutesConfig</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Config</span> </span><span>{</span></pre><pre class="line-added">  <span class="hljs-keyword">constructor</span>() <span>{</span></pre><pre class="line-added">    <span class="hljs-keyword">super</span>(...arguments);</pre><pre class="line-added"> </pre><pre class="line-added">    <span class="hljs-keyword">this</span>.isAuthorized = [<span class="hljs-string">'$auth'</span>, <span class="hljs-keyword">this</span>.isAuthorized.bind(<span class="hljs-keyword">this</span>)];</pre><pre class="line-added">  <span>}</span></pre><pre class="line-added"> </pre><pre class="line-context">  configure() <span>{</span></pre><pre class="line-context">    <span class="hljs-keyword">this</span>.$stateProvider</pre><pre class="line-context">      .state(<span class="hljs-string">'tab'</span>, <span>{</span></pre><pre class="line-context">        url: <span class="hljs-string">'/tab'</span>,</pre><pre class="line-context">        abstract: <span class="hljs-literal">true</span>,</pre><pre class="line-added">        templateUrl: tabsTemplateUrl,</pre><pre class="line-added">        resolve: <span>{</span></pre><pre class="line-added">          user: <span class="hljs-keyword">this</span>.isAuthorized</pre><pre class="line-added">        <span>}</span></pre><pre class="line-context">      <span>}</span>)</pre><pre class="line-context">      .state(<span class="hljs-string">'tab.chats'</span>, <span>{</span></pre><pre class="line-context">        url: <span class="hljs-string">'/chats'</span>,</pre><pre class="undefined"><span class="hljs-comment">...some lines skipped...</span></pre><pre class="line-context">      .state(<span class="hljs-string">'profile'</span>, <span>{</span></pre><pre class="line-context">        url: <span class="hljs-string">'/profile'</span>,</pre><pre class="line-context">        templateUrl: profileTemplateUrl,</pre><pre class="line-added">        controller: <span class="hljs-string">'ProfileCtrl as profile'</span>,</pre><pre class="line-added">        resolve: <span>{</span></pre><pre class="line-added">          user: <span class="hljs-keyword">this</span>.isAuthorized</pre><pre class="line-added">        <span>}</span></pre><pre class="line-context">      <span>}</span>);</pre><pre class="line-context"> </pre><pre class="line-context">    <span class="hljs-keyword">this</span>.$urlRouterProvider.otherwise(<span class="hljs-string">'tab/chats'</span>);</pre><pre class="line-context">  <span>}</span></pre><pre class="line-added"> </pre><pre class="line-added">  isAuthorized($auth) <span>{</span></pre><pre class="line-added">    <span class="hljs-keyword">return</span> $auth.awaitUser();</pre><pre class="line-added">  <span>}</span></pre><pre class="line-context"><span>}</span></pre><pre class="line-context"> </pre><pre class="line-context">RoutesConfig.$inject = [<span class="hljs-string">'$stateProvider'</span>, <span class="hljs-string">'$urlRouterProvider'</span>];</pre></diffbox-container>
      </div>
      <!--template bindings={}--><div _ngcontent-35="" class="improve-code">
        <a _ngcontent-35="" href="https://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/edit/master/manuals/views/step4.md">Improve this code</a>
      </div>
    </div>
  </div>
</div></diffbox>

<p>And now we want to handle a case that this promise does not resolve (In case that the user is not logged in), so let's create a new run block to our <code>routes.js</code> file:</p>
<diffbox step="4.10" tutorial="whatsapp-meteor-tutorial" _nghost-35="">
<!--template bindings={}--><div _ngcontent-35="">
  <!--template bindings={}--><div _ngcontent-35="" class="diffbox">
    <div _ngcontent-35="" class="title-panel">
      <span _ngcontent-35="" class="step-number">4.10</span> <span _ngcontent-35="" class="commit-summary">Add routes runner</span>
      <a _ngcontent-35="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/commit/b15bde385fc59b4bcdc6a754eeb93f4849c6b688">client/scripts/routes.js</a>
    </div>
    <div _ngcontent-35="" class="code-container">
      <div _ngcontent-35="" class="scroll-container">
        <div _ngcontent-35="" class="line-numbers">
          <!--template bindings={}--><pre _ngcontent-35="" class="line-number">1</pre><pre _ngcontent-35="" class="line-number">2</pre><pre _ngcontent-35="" class="line-number">3</pre><pre _ngcontent-35="" class="line-number">4</pre><pre _ngcontent-35="" class="line-number">5</pre><pre _ngcontent-35="" class="line-number"> </pre><pre _ngcontent-35="" class="line-number">8</pre><pre _ngcontent-35="" class="line-number">9</pre><pre _ngcontent-35="" class="line-number">10</pre><pre _ngcontent-35="" class="line-number">11</pre><pre _ngcontent-35="" class="line-number">12</pre><pre _ngcontent-35="" class="line-number">13</pre><pre _ngcontent-35="" class="line-number">14</pre><pre _ngcontent-35="" class="line-number"> </pre><pre _ngcontent-35="" class="line-number">70</pre><pre _ngcontent-35="" class="line-number">71</pre><pre _ngcontent-35="" class="line-number">72</pre><pre _ngcontent-35="" class="line-number">73</pre><pre _ngcontent-35="" class="line-number">74</pre><pre _ngcontent-35="" class="line-number">75</pre><pre _ngcontent-35="" class="line-number">76</pre><pre _ngcontent-35="" class="line-number">77</pre><pre _ngcontent-35="" class="line-number">78</pre><pre _ngcontent-35="" class="line-number">79</pre><pre _ngcontent-35="" class="line-number">80</pre><pre _ngcontent-35="" class="line-number">81</pre><pre _ngcontent-35="" class="line-number">82</pre><pre _ngcontent-35="" class="line-number">83</pre><pre _ngcontent-35="" class="line-number">84</pre><pre _ngcontent-35="" class="line-number">85</pre><pre _ngcontent-35="" class="line-number">86</pre><pre _ngcontent-35="" class="line-number">87</pre><pre _ngcontent-35="" class="line-number">88</pre><pre _ngcontent-35="" class="line-number">89</pre>
        </div>
        <div _ngcontent-35="" class="line-content"></div><diffbox-container><pre class="line-added"><span class="hljs-keyword">import</span> <span>{</span> _ <span>}</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'meteor/underscore'</span>;</pre><pre class="line-added"><span class="hljs-keyword">import</span> <span>{</span> Config, Runner <span>}</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'angular-ecmascript/module-helpers'</span>;</pre><pre class="line-context"> </pre><pre class="line-context"><span class="hljs-keyword">import</span> chatsTemplateUrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../templates/chats.html'</span>;</pre><pre class="line-context"><span class="hljs-keyword">import</span> chatTemplateUrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../templates/chat.html'</span>;</pre><pre class="undefined"><span class="hljs-comment">...some lines skipped...</span></pre><pre class="line-context"><span class="hljs-keyword">import</span> profileTemplateUrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../templates/profile.html'</span>;</pre><pre class="line-context"><span class="hljs-keyword">import</span> tabsTemplateUrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../templates/tabs.html'</span>;</pre><pre class="line-context"> </pre><pre class="line-added"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RoutesConfig</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Config</span> </span><span>{</span></pre><pre class="line-context">  <span class="hljs-keyword">constructor</span>() <span>{</span></pre><pre class="line-context">    <span class="hljs-keyword">super</span>(...arguments);</pre><pre class="line-context"> </pre><pre class="undefined"><span class="hljs-comment">...some lines skipped...</span></pre><pre class="line-context">  <span>}</span></pre><pre class="line-context"><span>}</span></pre><pre class="line-context"> </pre><pre class="line-added">RoutesConfig.$inject = [<span class="hljs-string">'$stateProvider'</span>, <span class="hljs-string">'$urlRouterProvider'</span>];</pre><pre class="line-added"> </pre><pre class="line-added"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RoutesRunner</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Runner</span> </span><span>{</span></pre><pre class="line-added">  run() <span>{</span></pre><pre class="line-added">    <span class="hljs-keyword">this</span>.$rootScope.$on(<span class="hljs-string">'$stateChangeError'</span>, (...args) =&gt; <span>{</span></pre><pre class="line-added">      <span class="hljs-keyword">const</span> err = _.last(args);</pre><pre class="line-added"> </pre><pre class="line-added">      <span class="hljs-keyword">if</span> (err === <span class="hljs-string">'AUTH_REQUIRED'</span>) <span>{</span></pre><pre class="line-added">        <span class="hljs-keyword">this</span>.$state.go(<span class="hljs-string">'login'</span>);</pre><pre class="line-added">      <span>}</span></pre><pre class="line-added">    <span>}</span>);</pre><pre class="line-added">  <span>}</span></pre><pre class="line-added"><span>}</span></pre><pre class="line-added"> </pre><pre class="line-added">RoutesRunner.$inject = [<span class="hljs-string">'$rootScope'</span>, <span class="hljs-string">'$state'</span>];</pre><pre class="line-added"> </pre><pre class="line-added"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> [RoutesConfig, RoutesRunner];</pre></diffbox-container>
      </div>
      <!--template bindings={}--><div _ngcontent-35="" class="improve-code">
        <a _ngcontent-35="" href="https://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/edit/master/manuals/views/step4.md">Improve this code</a>
      </div>
    </div>
  </div>
</div></diffbox>

<diffbox step="4.11" tutorial="whatsapp-meteor-tutorial" _nghost-35="">
<!--template bindings={}--><div _ngcontent-35="">
  <!--template bindings={}--><div _ngcontent-35="" class="diffbox">
    <div _ngcontent-35="" class="title-panel">
      <span _ngcontent-35="" class="step-number">4.11</span> <span _ngcontent-35="" class="commit-summary">Create routes runner</span>
      <a _ngcontent-35="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/commit/4caf673ea5f3da7e454d39ec0c0ad85c5eba0895">client/scripts/lib/app.js</a>
    </div>
    <div _ngcontent-35="" class="code-container">
      <div _ngcontent-35="" class="scroll-container">
        <div _ngcontent-35="" class="line-numbers">
          <!--template bindings={}--><pre _ngcontent-35="" class="line-number">16</pre><pre _ngcontent-35="" class="line-number">17</pre><pre _ngcontent-35="" class="line-number">18</pre><pre _ngcontent-35="" class="line-number">19</pre><pre _ngcontent-35="" class="line-number">20</pre><pre _ngcontent-35="" class="line-number">21</pre><pre _ngcontent-35="" class="line-number">22</pre><pre _ngcontent-35="" class="line-number"> </pre><pre _ngcontent-35="" class="line-number">34</pre><pre _ngcontent-35="" class="line-number">35</pre><pre _ngcontent-35="" class="line-number">36</pre><pre _ngcontent-35="" class="line-number">37</pre><pre _ngcontent-35="" class="line-number">38</pre><pre _ngcontent-35="" class="line-number">39</pre><pre _ngcontent-35="" class="line-number">40</pre>
        </div>
        <div _ngcontent-35="" class="line-content"></div><diffbox-container><pre class="line-context"><span class="hljs-keyword">import</span> LoginCtrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../controllers/login.controller'</span>;</pre><pre class="line-context"><span class="hljs-keyword">import</span> InputDirective <span class="hljs-keyword">from</span> <span class="hljs-string">'../directives/input.directive'</span>;</pre><pre class="line-context"><span class="hljs-keyword">import</span> CalendarFilter <span class="hljs-keyword">from</span> <span class="hljs-string">'../filters/calendar.filter'</span>;</pre><pre class="line-added"><span class="hljs-keyword">import</span> Routes <span class="hljs-keyword">from</span> <span class="hljs-string">'../routes'</span>;</pre><pre class="line-context"> </pre><pre class="line-context"><span class="hljs-keyword">const</span> App = <span class="hljs-string">'Whatsapp'</span>;</pre><pre class="line-context"> </pre><pre class="undefined"><span class="hljs-comment">...some lines skipped...</span></pre><pre class="line-context">  .load(LoginCtrl)</pre><pre class="line-context">  .load(InputDirective)</pre><pre class="line-context">  .load(CalendarFilter)</pre><pre class="line-added">  .load(Routes);</pre><pre class="line-context"> </pre><pre class="line-context"><span class="hljs-comment">// Startup</span></pre><pre class="line-context"><span class="hljs-keyword">if</span> (Meteor.isCordova) <span>{</span></pre></diffbox-container>
      </div>
      <!--template bindings={}--><div _ngcontent-35="" class="improve-code">
        <a _ngcontent-35="" href="https://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/edit/master/manuals/views/step4.md">Improve this code</a>
      </div>
    </div>
  </div>
</div></diffbox>

<p>And now let's add some <code>css</code>:</p>
<diffbox step="4.12" tutorial="whatsapp-meteor-tutorial" _nghost-35="">
<!--template bindings={}--><div _ngcontent-35="">
  <!--template bindings={}--><div _ngcontent-35="" class="diffbox">
    <div _ngcontent-35="" class="title-panel">
      <span _ngcontent-35="" class="step-number">4.12</span> <span _ngcontent-35="" class="commit-summary">Add login stylesheet</span>
      <a _ngcontent-35="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/commit/3e6d219e59ba9d3a6e41e097b63249fbc3566ccc">client/styles/login.scss</a>
    </div>
    <div _ngcontent-35="" class="code-container">
      <div _ngcontent-35="" class="scroll-container">
        <div _ngcontent-35="" class="line-numbers">
          <!--template bindings={}--><pre _ngcontent-35="" class="line-number">1</pre><pre _ngcontent-35="" class="line-number">2</pre><pre _ngcontent-35="" class="line-number">3</pre><pre _ngcontent-35="" class="line-number">4</pre><pre _ngcontent-35="" class="line-number">5</pre><pre _ngcontent-35="" class="line-number">6</pre>
        </div>
        <div _ngcontent-35="" class="line-content"></div><diffbox-container><pre class="line-added"><span class="hljs-selector-class">.login</span> <span>{</span></pre><pre class="line-added">  <span class="hljs-selector-class">.instructions</span> <span>{</span></pre><pre class="line-added">    <span class="hljs-attribute">margin</span>: <span class="hljs-number">50px</span> <span class="hljs-number">0</span>;</pre><pre class="line-added">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">15px</span>;</pre><pre class="line-added">  <span>}</span></pre><pre class="line-added"><span>}</span></pre></diffbox-container>
      </div>
      <!--template bindings={}--><div _ngcontent-35="" class="improve-code">
        <a _ngcontent-35="" href="https://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/edit/master/manuals/views/step4.md">Improve this code</a>
      </div>
    </div>
  </div>
</div></diffbox>

<p>The next step is to add the confirmation view, starting with the HTML:</p>
<diffbox step="4.13" tutorial="whatsapp-meteor-tutorial" _nghost-35="">
<!--template bindings={}--><div _ngcontent-35="">
  <!--template bindings={}--><div _ngcontent-35="" class="diffbox">
    <div _ngcontent-35="" class="title-panel">
      <span _ngcontent-35="" class="step-number">4.13</span> <span _ngcontent-35="" class="commit-summary">Add confirmation view</span>
      <a _ngcontent-35="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/commit/1675437700e11c9ef24482af27568275a3b26d28">client/templates/confirmation.html</a>
    </div>
    <div _ngcontent-35="" class="code-container">
      <div _ngcontent-35="" class="scroll-container">
        <div _ngcontent-35="" class="line-numbers">
          <!--template bindings={}--><pre _ngcontent-35="" class="line-number">1</pre><pre _ngcontent-35="" class="line-number">2</pre><pre _ngcontent-35="" class="line-number">3</pre><pre _ngcontent-35="" class="line-number">4</pre><pre _ngcontent-35="" class="line-number">5</pre><pre _ngcontent-35="" class="line-number">6</pre><pre _ngcontent-35="" class="line-number">7</pre><pre _ngcontent-35="" class="line-number">8</pre><pre _ngcontent-35="" class="line-number">9</pre><pre _ngcontent-35="" class="line-number">10</pre><pre _ngcontent-35="" class="line-number">11</pre><pre _ngcontent-35="" class="line-number">12</pre><pre _ngcontent-35="" class="line-number">13</pre><pre _ngcontent-35="" class="line-number">14</pre><pre _ngcontent-35="" class="line-number">15</pre><pre _ngcontent-35="" class="line-number">16</pre><pre _ngcontent-35="" class="line-number">17</pre><pre _ngcontent-35="" class="line-number">18</pre><pre _ngcontent-35="" class="line-number">19</pre><pre _ngcontent-35="" class="line-number">20</pre>
        </div>
        <div _ngcontent-35="" class="line-content"></div><diffbox-container><pre class="line-added"><span class="hljs-tag">&lt;<span class="hljs-name">ion-view</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"<span>{</span><span>{</span> confirmation.phone <span>}</span><span>}</span>"</span>&gt;</span></pre><pre class="line-added">  <span class="hljs-tag">&lt;<span class="hljs-name">ion-nav-buttons</span> <span class="hljs-attr">side</span>=<span class="hljs-string">"right"</span>&gt;</span></pre><pre class="line-added">    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">ng-click</span>=<span class="hljs-string">"confirmation.confirm()"</span> <span class="hljs-attr">ng-disabled</span>=<span class="hljs-string">"!confirmation.code || confirmation.code.length === 0"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button button-clear button-positive"</span>&gt;</span>Done<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></pre><pre class="line-added">  <span class="hljs-tag">&lt;/<span class="hljs-name">ion-nav-buttons</span>&gt;</span></pre><pre class="line-added"> </pre><pre class="line-added">  <span class="hljs-tag">&lt;<span class="hljs-name">ion-content</span>&gt;</span></pre><pre class="line-added">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-center padding"</span>&gt;</span></pre><pre class="line-added">      We have sent you an SMS with a code to the number above</pre><pre class="line-added">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre><pre class="line-added">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-center padding"</span>&gt;</span></pre><pre class="line-added">      To complete your phone number verification WhatsApp, please enter the 4-digit activation code.</pre><pre class="line-added">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre><pre class="line-added"> </pre><pre class="line-added">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"list padding-top"</span>&gt;</span></pre><pre class="line-added">      <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item item-input"</span>&gt;</span></pre><pre class="line-added">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ng-model</span>=<span class="hljs-string">"confirmation.code"</span> <span class="hljs-attr">on-return</span>=<span class="hljs-string">"confirmation.confirm()"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"Code"</span>&gt;</span></pre><pre class="line-added">      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></pre><pre class="line-added">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre><pre class="line-added">  <span class="hljs-tag">&lt;/<span class="hljs-name">ion-content</span>&gt;</span></pre><pre class="line-added"><span class="hljs-tag">&lt;/<span class="hljs-name">ion-view</span>&gt;</span></pre></diffbox-container>
      </div>
      <!--template bindings={}--><div _ngcontent-35="" class="improve-code">
        <a _ngcontent-35="" href="https://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/edit/master/manuals/views/step4.md">Improve this code</a>
      </div>
    </div>
  </div>
</div></diffbox>

<p>And the controller:</p>
<diffbox step="4.14" tutorial="whatsapp-meteor-tutorial" _nghost-35="">
<!--template bindings={}--><div _ngcontent-35="">
  <!--template bindings={}--><div _ngcontent-35="" class="diffbox">
    <div _ngcontent-35="" class="title-panel">
      <span _ngcontent-35="" class="step-number">4.14</span> <span _ngcontent-35="" class="commit-summary">Create confirmation controller</span>
      <a _ngcontent-35="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/commit/b5f51148ee20fb3499cbec832c3628ed56e25882">client/scripts/controllers/confirmation.controller.js</a>
    </div>
    <div _ngcontent-35="" class="code-container">
      <div _ngcontent-35="" class="scroll-container">
        <div _ngcontent-35="" class="line-numbers">
          <!--template bindings={}--><pre _ngcontent-35="" class="line-number">1</pre><pre _ngcontent-35="" class="line-number">2</pre><pre _ngcontent-35="" class="line-number">3</pre><pre _ngcontent-35="" class="line-number">4</pre><pre _ngcontent-35="" class="line-number">5</pre><pre _ngcontent-35="" class="line-number">6</pre><pre _ngcontent-35="" class="line-number">7</pre><pre _ngcontent-35="" class="line-number">8</pre><pre _ngcontent-35="" class="line-number">9</pre><pre _ngcontent-35="" class="line-number">10</pre><pre _ngcontent-35="" class="line-number">11</pre><pre _ngcontent-35="" class="line-number">12</pre><pre _ngcontent-35="" class="line-number">13</pre><pre _ngcontent-35="" class="line-number">14</pre><pre _ngcontent-35="" class="line-number">15</pre><pre _ngcontent-35="" class="line-number">16</pre><pre _ngcontent-35="" class="line-number">17</pre><pre _ngcontent-35="" class="line-number">18</pre><pre _ngcontent-35="" class="line-number">19</pre><pre _ngcontent-35="" class="line-number">20</pre><pre _ngcontent-35="" class="line-number">21</pre><pre _ngcontent-35="" class="line-number">22</pre><pre _ngcontent-35="" class="line-number">23</pre><pre _ngcontent-35="" class="line-number">24</pre><pre _ngcontent-35="" class="line-number">25</pre><pre _ngcontent-35="" class="line-number">26</pre><pre _ngcontent-35="" class="line-number">27</pre><pre _ngcontent-35="" class="line-number">28</pre><pre _ngcontent-35="" class="line-number">29</pre><pre _ngcontent-35="" class="line-number">30</pre><pre _ngcontent-35="" class="line-number">31</pre><pre _ngcontent-35="" class="line-number">32</pre><pre _ngcontent-35="" class="line-number">33</pre>
        </div>
        <div _ngcontent-35="" class="line-content"></div><diffbox-container><pre class="line-added"><span class="hljs-keyword">import</span> <span>{</span> _ <span>}</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'meteor/underscore'</span>;</pre><pre class="line-added"><span class="hljs-keyword">import</span> <span>{</span> Accounts <span>}</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'meteor/accounts-base'</span>;</pre><pre class="line-added"><span class="hljs-keyword">import</span> <span>{</span> Controller <span>}</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'angular-ecmascript/module-helpers'</span>;</pre><pre class="line-added"> </pre><pre class="line-added"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConfirmationCtrl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span> </span><span>{</span></pre><pre class="line-added">  <span class="hljs-keyword">constructor</span>() <span>{</span></pre><pre class="line-added">    <span class="hljs-keyword">super</span>(...arguments);</pre><pre class="line-added"> </pre><pre class="line-added">    <span class="hljs-keyword">this</span>.phone = <span class="hljs-keyword">this</span>.$state.params.phone;</pre><pre class="line-added">  <span>}</span></pre><pre class="line-added"> </pre><pre class="line-added">  confirm() <span>{</span></pre><pre class="line-added">    <span class="hljs-keyword">if</span> (_.isEmpty(<span class="hljs-keyword">this</span>.code)) <span class="hljs-keyword">return</span>;</pre><pre class="line-added"> </pre><pre class="line-added">    Accounts.verifyPhone(<span class="hljs-keyword">this</span>.phone, <span class="hljs-keyword">this</span>.code, (err) =&gt; <span>{</span></pre><pre class="line-added">      <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.handleError(err);</pre><pre class="line-added">      <span class="hljs-keyword">this</span>.$state.go(<span class="hljs-string">'profile'</span>);</pre><pre class="line-added">    <span>}</span>);</pre><pre class="line-added">  <span>}</span></pre><pre class="line-added"> </pre><pre class="line-added">  handleError(err) <span>{</span></pre><pre class="line-added">    <span class="hljs-keyword">this</span>.$log.error(<span class="hljs-string">'Confirmation error '</span>, err);</pre><pre class="line-added"> </pre><pre class="line-added">    <span class="hljs-keyword">this</span>.$ionicPopup.alert(<span>{</span></pre><pre class="line-added">      title: err.reason || <span class="hljs-string">'Confirmation failed'</span>,</pre><pre class="line-added">      template: <span class="hljs-string">'Please try again'</span>,</pre><pre class="line-added">      okType: <span class="hljs-string">'button-positive button-clear'</span></pre><pre class="line-added">    <span>}</span>);</pre><pre class="line-added">  <span>}</span></pre><pre class="line-added"><span>}</span></pre><pre class="line-added"> </pre><pre class="line-added">ConfirmationCtrl.$name = <span class="hljs-string">'ConfirmationCtrl'</span>;</pre><pre class="line-added">ConfirmationCtrl.$inject = [<span class="hljs-string">'$state'</span>, <span class="hljs-string">'$ionicPopup'</span>, <span class="hljs-string">'$log'</span>];</pre></diffbox-container>
      </div>
      <!--template bindings={}--><div _ngcontent-35="" class="improve-code">
        <a _ngcontent-35="" href="https://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/edit/master/manuals/views/step4.md">Improve this code</a>
      </div>
    </div>
  </div>
</div></diffbox>

<diffbox step="4.15" tutorial="whatsapp-meteor-tutorial" _nghost-35="">
<!--template bindings={}--><div _ngcontent-35="">
  <!--template bindings={}--><div _ngcontent-35="" class="diffbox">
    <div _ngcontent-35="" class="title-panel">
      <span _ngcontent-35="" class="step-number">4.15</span> <span _ngcontent-35="" class="commit-summary">Load confirmation controller</span>
      <a _ngcontent-35="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/commit/23385a2e647a2df96a0ff072b1a27b51e21b83fc">client/scripts/lib/app.js</a>
    </div>
    <div _ngcontent-35="" class="code-container">
      <div _ngcontent-35="" class="scroll-container">
        <div _ngcontent-35="" class="line-numbers">
          <!--template bindings={}--><pre _ngcontent-35="" class="line-number">13</pre><pre _ngcontent-35="" class="line-number">14</pre><pre _ngcontent-35="" class="line-number">15</pre><pre _ngcontent-35="" class="line-number">16</pre><pre _ngcontent-35="" class="line-number">17</pre><pre _ngcontent-35="" class="line-number">18</pre><pre _ngcontent-35="" class="line-number">19</pre><pre _ngcontent-35="" class="line-number"> </pre><pre _ngcontent-35="" class="line-number">32</pre><pre _ngcontent-35="" class="line-number">33</pre><pre _ngcontent-35="" class="line-number">34</pre><pre _ngcontent-35="" class="line-number">35</pre><pre _ngcontent-35="" class="line-number">36</pre><pre _ngcontent-35="" class="line-number">37</pre><pre _ngcontent-35="" class="line-number">38</pre>
        </div>
        <div _ngcontent-35="" class="line-content"></div><diffbox-container><pre class="line-context"><span class="hljs-comment">// Modules</span></pre><pre class="line-context"><span class="hljs-keyword">import</span> ChatsCtrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../controllers/chats.controller'</span>;</pre><pre class="line-context"><span class="hljs-keyword">import</span> ChatCtrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../controllers/chat.controller'</span>;</pre><pre class="line-added"><span class="hljs-keyword">import</span> ConfirmationCtrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../controllers/confirmation.controller'</span>;</pre><pre class="line-context"><span class="hljs-keyword">import</span> LoginCtrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../controllers/login.controller'</span>;</pre><pre class="line-context"><span class="hljs-keyword">import</span> InputDirective <span class="hljs-keyword">from</span> <span class="hljs-string">'../directives/input.directive'</span>;</pre><pre class="line-context"><span class="hljs-keyword">import</span> CalendarFilter <span class="hljs-keyword">from</span> <span class="hljs-string">'../filters/calendar.filter'</span>;</pre><pre class="undefined"><span class="hljs-comment">...some lines skipped...</span></pre><pre class="line-context"><span class="hljs-keyword">new</span> Loader(App)</pre><pre class="line-context">  .load(ChatsCtrl)</pre><pre class="line-context">  .load(ChatCtrl)</pre><pre class="line-added">  .load(ConfirmationCtrl)</pre><pre class="line-context">  .load(LoginCtrl)</pre><pre class="line-context">  .load(InputDirective)</pre><pre class="line-context">  .load(CalendarFilter)</pre></diffbox-container>
      </div>
      <!--template bindings={}--><div _ngcontent-35="" class="improve-code">
        <a _ngcontent-35="" href="https://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/edit/master/manuals/views/step4.md">Improve this code</a>
      </div>
    </div>
  </div>
</div></diffbox>

<p>We will use <code>Accounts</code> API again to verify the user and in case of successful authentication we will transition to the <code>profile</code> state, which we will add in the next step.</p>
<p>Let's implement the profile view, which provides the ability to enter the user's nickname and profile picture:</p>
<diffbox step="4.16" tutorial="whatsapp-meteor-tutorial" _nghost-35="">
<!--template bindings={}--><div _ngcontent-35="">
  <!--template bindings={}--><div _ngcontent-35="" class="diffbox">
    <div _ngcontent-35="" class="title-panel">
      <span _ngcontent-35="" class="step-number">4.16</span> <span _ngcontent-35="" class="commit-summary">Add profile view</span>
      <a _ngcontent-35="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/commit/6edba44a3c42be9daa2d640038fd316496700e4a">client/templates/profile.html</a>
    </div>
    <div _ngcontent-35="" class="code-container">
      <div _ngcontent-35="" class="scroll-container">
        <div _ngcontent-35="" class="line-numbers">
          <!--template bindings={}--><pre _ngcontent-35="" class="line-number">1</pre><pre _ngcontent-35="" class="line-number">2</pre><pre _ngcontent-35="" class="line-number">3</pre><pre _ngcontent-35="" class="line-number">4</pre><pre _ngcontent-35="" class="line-number">5</pre><pre _ngcontent-35="" class="line-number">6</pre><pre _ngcontent-35="" class="line-number">7</pre><pre _ngcontent-35="" class="line-number">8</pre><pre _ngcontent-35="" class="line-number">9</pre><pre _ngcontent-35="" class="line-number">10</pre><pre _ngcontent-35="" class="line-number">11</pre><pre _ngcontent-35="" class="line-number">12</pre><pre _ngcontent-35="" class="line-number">13</pre><pre _ngcontent-35="" class="line-number">14</pre><pre _ngcontent-35="" class="line-number">15</pre><pre _ngcontent-35="" class="line-number">16</pre><pre _ngcontent-35="" class="line-number">17</pre><pre _ngcontent-35="" class="line-number">18</pre><pre _ngcontent-35="" class="line-number">19</pre><pre _ngcontent-35="" class="line-number">20</pre><pre _ngcontent-35="" class="line-number">21</pre><pre _ngcontent-35="" class="line-number">22</pre><pre _ngcontent-35="" class="line-number">23</pre>
        </div>
        <div _ngcontent-35="" class="line-content"></div><diffbox-container><pre class="line-added"><span class="hljs-tag">&lt;<span class="hljs-name">ion-view</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"Profile"</span>&gt;</span></pre><pre class="line-added">  <span class="hljs-tag">&lt;<span class="hljs-name">ion-nav-buttons</span> <span class="hljs-attr">side</span>=<span class="hljs-string">"right"</span>&gt;</span></pre><pre class="line-added">    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">ng-click</span>=<span class="hljs-string">"profile.updateName()"</span> <span class="hljs-attr">ng-disabled</span>=<span class="hljs-string">"!profile.name || profile.name.length === 0"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button button-clear button-positive"</span>&gt;</span>Done<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></pre><pre class="line-added">  <span class="hljs-tag">&lt;/<span class="hljs-name">ion-nav-buttons</span>&gt;</span></pre><pre class="line-added"> </pre><pre class="line-added">  <span class="hljs-tag">&lt;<span class="hljs-name">ion-content</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"profile"</span>&gt;</span></pre><pre class="line-added">    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"profile-picture positive"</span>&gt;</span></pre><pre class="line-added">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"upload-placehoder"</span>&gt;</span></pre><pre class="line-added">        Add photo</pre><pre class="line-added">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre><pre class="line-added">    <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></pre><pre class="line-added"> </pre><pre class="line-added">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"instructions"</span>&gt;</span></pre><pre class="line-added">      Enter your name and add an optional profile picture</pre><pre class="line-added">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre><pre class="line-added"> </pre><pre class="line-added">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"list profile-name"</span>&gt;</span></pre><pre class="line-added">      <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item item-input"</span>&gt;</span></pre><pre class="line-added">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ng-model</span>=<span class="hljs-string">"profile.name"</span> <span class="hljs-attr">on-return</span>=<span class="hljs-string">"profile.updateName()"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"Your name"</span>&gt;</span></pre><pre class="line-added">      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></pre><pre class="line-added">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre><pre class="line-added">  <span class="hljs-tag">&lt;/<span class="hljs-name">ion-content</span>&gt;</span></pre><pre class="line-added"><span class="hljs-tag">&lt;/<span class="hljs-name">ion-view</span>&gt;</span></pre></diffbox-container>
      </div>
      <!--template bindings={}--><div _ngcontent-35="" class="improve-code">
        <a _ngcontent-35="" href="https://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/edit/master/manuals/views/step4.md">Improve this code</a>
      </div>
    </div>
  </div>
</div></diffbox>

<p>And the controller:</p>
<diffbox step="4.17" tutorial="whatsapp-meteor-tutorial" _nghost-35="">
<!--template bindings={}--><div _ngcontent-35="">
  <!--template bindings={}--><div _ngcontent-35="" class="diffbox">
    <div _ngcontent-35="" class="title-panel">
      <span _ngcontent-35="" class="step-number">4.17</span> <span _ngcontent-35="" class="commit-summary">Create profile controller</span>
      <a _ngcontent-35="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/commit/0cad455e354caf10a6c149fbad6515ecfbf98346">client/scripts/controllers/profile.controller.js</a>
    </div>
    <div _ngcontent-35="" class="code-container">
      <div _ngcontent-35="" class="scroll-container">
        <div _ngcontent-35="" class="line-numbers">
          <!--template bindings={}--><pre _ngcontent-35="" class="line-number">1</pre><pre _ngcontent-35="" class="line-number">2</pre><pre _ngcontent-35="" class="line-number">3</pre><pre _ngcontent-35="" class="line-number">4</pre><pre _ngcontent-35="" class="line-number">5</pre><pre _ngcontent-35="" class="line-number">6</pre><pre _ngcontent-35="" class="line-number">7</pre><pre _ngcontent-35="" class="line-number">8</pre><pre _ngcontent-35="" class="line-number">9</pre><pre _ngcontent-35="" class="line-number">10</pre><pre _ngcontent-35="" class="line-number">11</pre><pre _ngcontent-35="" class="line-number">12</pre><pre _ngcontent-35="" class="line-number">13</pre><pre _ngcontent-35="" class="line-number">14</pre><pre _ngcontent-35="" class="line-number">15</pre><pre _ngcontent-35="" class="line-number">16</pre><pre _ngcontent-35="" class="line-number">17</pre><pre _ngcontent-35="" class="line-number">18</pre><pre _ngcontent-35="" class="line-number">19</pre><pre _ngcontent-35="" class="line-number">20</pre><pre _ngcontent-35="" class="line-number">21</pre><pre _ngcontent-35="" class="line-number">22</pre><pre _ngcontent-35="" class="line-number">23</pre><pre _ngcontent-35="" class="line-number">24</pre><pre _ngcontent-35="" class="line-number">25</pre><pre _ngcontent-35="" class="line-number">26</pre><pre _ngcontent-35="" class="line-number">27</pre><pre _ngcontent-35="" class="line-number">28</pre><pre _ngcontent-35="" class="line-number">29</pre><pre _ngcontent-35="" class="line-number">30</pre><pre _ngcontent-35="" class="line-number">31</pre><pre _ngcontent-35="" class="line-number">32</pre><pre _ngcontent-35="" class="line-number">33</pre>
        </div>
        <div _ngcontent-35="" class="line-content"></div><diffbox-container><pre class="line-added"><span class="hljs-keyword">import</span> <span>{</span> _ <span>}</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'meteor/underscore'</span>;</pre><pre class="line-added"><span class="hljs-keyword">import</span> <span>{</span> Controller <span>}</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'angular-ecmascript/module-helpers'</span>;</pre><pre class="line-added"> </pre><pre class="line-added"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProfileCtrl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span> </span><span>{</span></pre><pre class="line-added">  <span class="hljs-keyword">constructor</span>() <span>{</span></pre><pre class="line-added">    <span class="hljs-keyword">super</span>(...arguments);</pre><pre class="line-added"> </pre><pre class="line-added">    <span class="hljs-keyword">const</span> profile = <span class="hljs-keyword">this</span>.currentUser &amp;&amp; <span class="hljs-keyword">this</span>.currentUser.profile;</pre><pre class="line-added">    <span class="hljs-keyword">this</span>.name = profile ? profile.name : <span class="hljs-string">''</span>;</pre><pre class="line-added">  <span>}</span></pre><pre class="line-added"> </pre><pre class="line-added">  updateName() <span>{</span></pre><pre class="line-added">    <span class="hljs-keyword">if</span> (_.isEmpty(<span class="hljs-keyword">this</span>.name)) <span class="hljs-keyword">return</span>;</pre><pre class="line-added"> </pre><pre class="line-added">    <span class="hljs-keyword">this</span>.callMethod(<span class="hljs-string">'updateName'</span>, <span class="hljs-keyword">this</span>.name, (err) =&gt; <span>{</span></pre><pre class="line-added">      <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.handleError(err);</pre><pre class="line-added">      <span class="hljs-keyword">this</span>.$state.go(<span class="hljs-string">'tab.chats'</span>);</pre><pre class="line-added">    <span>}</span>);</pre><pre class="line-added">  <span>}</span></pre><pre class="line-added"> </pre><pre class="line-added">  handleError(err) <span>{</span></pre><pre class="line-added">    <span class="hljs-keyword">this</span>.$log.error(<span class="hljs-string">'Profile save error '</span>, err);</pre><pre class="line-added"> </pre><pre class="line-added">    <span class="hljs-keyword">this</span>.$ionicPopup.alert(<span>{</span></pre><pre class="line-added">      title: err.reason || <span class="hljs-string">'Save failed'</span>,</pre><pre class="line-added">      template: <span class="hljs-string">'Please try again'</span>,</pre><pre class="line-added">      okType: <span class="hljs-string">'button-positive button-clear'</span></pre><pre class="line-added">    <span>}</span>);</pre><pre class="line-added">  <span>}</span></pre><pre class="line-added"><span>}</span></pre><pre class="line-added"> </pre><pre class="line-added">ProfileCtrl.$name = <span class="hljs-string">'ProfileCtrl'</span>;</pre><pre class="line-added">ProfileCtrl.$inject = [<span class="hljs-string">'$state'</span>, <span class="hljs-string">'$ionicPopup'</span>, <span class="hljs-string">'$log'</span>];</pre></diffbox-container>
      </div>
      <!--template bindings={}--><div _ngcontent-35="" class="improve-code">
        <a _ngcontent-35="" href="https://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/edit/master/manuals/views/step4.md">Improve this code</a>
      </div>
    </div>
  </div>
</div></diffbox>

<diffbox step="4.18" tutorial="whatsapp-meteor-tutorial" _nghost-35="">
<!--template bindings={}--><div _ngcontent-35="">
  <!--template bindings={}--><div _ngcontent-35="" class="diffbox">
    <div _ngcontent-35="" class="title-panel">
      <span _ngcontent-35="" class="step-number">4.18</span> <span _ngcontent-35="" class="commit-summary">Load profile controller</span>
      <a _ngcontent-35="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/commit/444d6f8ecf6609f44a4087c5fd68306289dfca4b">client/scripts/lib/app.js</a>
    </div>
    <div _ngcontent-35="" class="code-container">
      <div _ngcontent-35="" class="scroll-container">
        <div _ngcontent-35="" class="line-numbers">
          <!--template bindings={}--><pre _ngcontent-35="" class="line-number">15</pre><pre _ngcontent-35="" class="line-number">16</pre><pre _ngcontent-35="" class="line-number">17</pre><pre _ngcontent-35="" class="line-number">18</pre><pre _ngcontent-35="" class="line-number">19</pre><pre _ngcontent-35="" class="line-number">20</pre><pre _ngcontent-35="" class="line-number">21</pre><pre _ngcontent-35="" class="line-number"> </pre><pre _ngcontent-35="" class="line-number">35</pre><pre _ngcontent-35="" class="line-number">36</pre><pre _ngcontent-35="" class="line-number">37</pre><pre _ngcontent-35="" class="line-number">38</pre><pre _ngcontent-35="" class="line-number">39</pre><pre _ngcontent-35="" class="line-number">40</pre><pre _ngcontent-35="" class="line-number">41</pre>
        </div>
        <div _ngcontent-35="" class="line-content"></div><diffbox-container><pre class="line-context"><span class="hljs-keyword">import</span> ChatCtrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../controllers/chat.controller'</span>;</pre><pre class="line-context"><span class="hljs-keyword">import</span> ConfirmationCtrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../controllers/confirmation.controller'</span>;</pre><pre class="line-context"><span class="hljs-keyword">import</span> LoginCtrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../controllers/login.controller'</span>;</pre><pre class="line-added"><span class="hljs-keyword">import</span> ProfileCtrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../controllers/profile.controller'</span>;</pre><pre class="line-context"><span class="hljs-keyword">import</span> InputDirective <span class="hljs-keyword">from</span> <span class="hljs-string">'../directives/input.directive'</span>;</pre><pre class="line-context"><span class="hljs-keyword">import</span> CalendarFilter <span class="hljs-keyword">from</span> <span class="hljs-string">'../filters/calendar.filter'</span>;</pre><pre class="line-context"><span class="hljs-keyword">import</span> Routes <span class="hljs-keyword">from</span> <span class="hljs-string">'../routes'</span>;</pre><pre class="undefined"><span class="hljs-comment">...some lines skipped...</span></pre><pre class="line-context">  .load(ChatCtrl)</pre><pre class="line-context">  .load(ConfirmationCtrl)</pre><pre class="line-context">  .load(LoginCtrl)</pre><pre class="line-added">  .load(ProfileCtrl)</pre><pre class="line-context">  .load(InputDirective)</pre><pre class="line-context">  .load(CalendarFilter)</pre><pre class="line-context">  .load(Routes);</pre></diffbox-container>
      </div>
      <!--template bindings={}--><div _ngcontent-35="" class="improve-code">
        <a _ngcontent-35="" href="https://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/edit/master/manuals/views/step4.md">Improve this code</a>
      </div>
    </div>
  </div>
</div></diffbox>

<p>And some <code>css</code>:</p>
<diffbox step="4.19" tutorial="whatsapp-meteor-tutorial" _nghost-35="">
<!--template bindings={}--><div _ngcontent-35="">
  <!--template bindings={}--><div _ngcontent-35="" class="diffbox">
    <div _ngcontent-35="" class="title-panel">
      <span _ngcontent-35="" class="step-number">4.19</span> <span _ngcontent-35="" class="commit-summary">Add profile stylesheet</span>
      <a _ngcontent-35="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/commit/5268e7770da3885711781b3f019908081eb935cc">client/styles/profile.scss</a>
    </div>
    <div _ngcontent-35="" class="code-container">
      <div _ngcontent-35="" class="scroll-container">
        <div _ngcontent-35="" class="line-numbers">
          <!--template bindings={}--><pre _ngcontent-35="" class="line-number">1</pre><pre _ngcontent-35="" class="line-number">2</pre><pre _ngcontent-35="" class="line-number">3</pre><pre _ngcontent-35="" class="line-number">4</pre><pre _ngcontent-35="" class="line-number">5</pre><pre _ngcontent-35="" class="line-number">6</pre><pre _ngcontent-35="" class="line-number">7</pre><pre _ngcontent-35="" class="line-number">8</pre><pre _ngcontent-35="" class="line-number">9</pre><pre _ngcontent-35="" class="line-number">10</pre><pre _ngcontent-35="" class="line-number">11</pre><pre _ngcontent-35="" class="line-number">12</pre><pre _ngcontent-35="" class="line-number">13</pre><pre _ngcontent-35="" class="line-number">14</pre><pre _ngcontent-35="" class="line-number">15</pre><pre _ngcontent-35="" class="line-number">16</pre><pre _ngcontent-35="" class="line-number">17</pre><pre _ngcontent-35="" class="line-number">18</pre><pre _ngcontent-35="" class="line-number">19</pre><pre _ngcontent-35="" class="line-number">20</pre><pre _ngcontent-35="" class="line-number">21</pre><pre _ngcontent-35="" class="line-number">22</pre><pre _ngcontent-35="" class="line-number">23</pre><pre _ngcontent-35="" class="line-number">24</pre><pre _ngcontent-35="" class="line-number">25</pre><pre _ngcontent-35="" class="line-number">26</pre><pre _ngcontent-35="" class="line-number">27</pre><pre _ngcontent-35="" class="line-number">28</pre><pre _ngcontent-35="" class="line-number">29</pre><pre _ngcontent-35="" class="line-number">30</pre><pre _ngcontent-35="" class="line-number">31</pre><pre _ngcontent-35="" class="line-number">32</pre><pre _ngcontent-35="" class="line-number">33</pre><pre _ngcontent-35="" class="line-number">34</pre><pre _ngcontent-35="" class="line-number">35</pre><pre _ngcontent-35="" class="line-number">36</pre><pre _ngcontent-35="" class="line-number">37</pre><pre _ngcontent-35="" class="line-number">38</pre><pre _ngcontent-35="" class="line-number">39</pre><pre _ngcontent-35="" class="line-number">40</pre>
        </div>
        <div _ngcontent-35="" class="line-content"></div><diffbox-container><pre class="line-added"><span class="hljs-selector-class">.profile</span> <span>{</span></pre><pre class="line-added">  <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">20px</span>;</pre><pre class="line-added"> </pre><pre class="line-added">  <span class="hljs-selector-class">.profile-picture</span> <span>{</span></pre><pre class="line-added">    <span class="hljs-attribute">position</span>: absolute;</pre><pre class="line-added">    <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;</pre><pre class="line-added">    <span class="hljs-attribute">left</span>: <span class="hljs-number">20px</span>;</pre><pre class="line-added">    <span class="hljs-attribute">text-align</span>: center;</pre><pre class="line-added"> </pre><pre class="line-added">    <span class="hljs-selector-tag">img</span> <span>{</span></pre><pre class="line-added">      <span class="hljs-attribute">display</span>: block;</pre><pre class="line-added">      <span class="hljs-attribute">max-width</span>: <span class="hljs-number">50px</span>;</pre><pre class="line-added">      <span class="hljs-attribute">max-height</span>: <span class="hljs-number">50px</span>;</pre><pre class="line-added">      <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</pre><pre class="line-added">      <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</pre><pre class="line-added">      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;</pre><pre class="line-added">    <span>}</span></pre><pre class="line-added"> </pre><pre class="line-added">    <span class="hljs-selector-class">.upload-placehoder</span> <span>{</span></pre><pre class="line-added">      <span class="hljs-attribute">width</span>: <span class="hljs-number">50px</span>;</pre><pre class="line-added">      <span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;</pre><pre class="line-added">      <span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span>;</pre><pre class="line-added">      <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#808080</span>;</pre><pre class="line-added">      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;</pre><pre class="line-added">      <span class="hljs-attribute">line-height</span>: <span class="hljs-number">18px</span>;</pre><pre class="line-added">      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;</pre><pre class="line-added">    <span>}</span></pre><pre class="line-added">  <span>}</span></pre><pre class="line-added"> </pre><pre class="line-added">  <span class="hljs-selector-class">.instructions</span> <span>{</span></pre><pre class="line-added">    <span class="hljs-attribute">min-height</span>: <span class="hljs-number">60px</span>;</pre><pre class="line-added">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">20px</span> <span class="hljs-number">20px</span> <span class="hljs-number">90px</span>;</pre><pre class="line-added">    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;</pre><pre class="line-added">    <span class="hljs-attribute">color</span>: gray;</pre><pre class="line-added">  <span>}</span></pre><pre class="line-added"> </pre><pre class="line-added">  <span class="hljs-selector-class">.profile-name</span> <span>{</span></pre><pre class="line-added">    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;</pre><pre class="line-added">  <span>}</span></pre><pre class="line-added"><span>}</span></pre></diffbox-container>
      </div>
      <!--template bindings={}--><div _ngcontent-35="" class="improve-code">
        <a _ngcontent-35="" href="https://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/edit/master/manuals/views/step4.md">Improve this code</a>
      </div>
    </div>
  </div>
</div></diffbox>

<p>As you can see, the controller uses the server method <code>updateName()</code> which we need to implement in the <code>lib/methods.js</code>:</p>
<diffbox step="4.20" tutorial="whatsapp-meteor-tutorial" _nghost-35="">
<!--template bindings={}--><div _ngcontent-35="">
  <!--template bindings={}--><div _ngcontent-35="" class="diffbox">
    <div _ngcontent-35="" class="title-panel">
      <span _ngcontent-35="" class="step-number">4.20</span> <span _ngcontent-35="" class="commit-summary">Add update name method</span>
      <a _ngcontent-35="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/commit/c2ad61da907f7a3486d84fa1ee2898dd02725235">lib/methods.js</a>
    </div>
    <div _ngcontent-35="" class="code-container">
      <div _ngcontent-35="" class="scroll-container">
        <div _ngcontent-35="" class="line-numbers">
          <!--template bindings={}--><pre _ngcontent-35="" class="line-number">15</pre><pre _ngcontent-35="" class="line-number">16</pre><pre _ngcontent-35="" class="line-number">17</pre><pre _ngcontent-35="" class="line-number">18</pre><pre _ngcontent-35="" class="line-number">19</pre><pre _ngcontent-35="" class="line-number">20</pre><pre _ngcontent-35="" class="line-number">21</pre><pre _ngcontent-35="" class="line-number">22</pre><pre _ngcontent-35="" class="line-number">23</pre><pre _ngcontent-35="" class="line-number">24</pre><pre _ngcontent-35="" class="line-number">25</pre><pre _ngcontent-35="" class="line-number">26</pre><pre _ngcontent-35="" class="line-number">27</pre><pre _ngcontent-35="" class="line-number">28</pre><pre _ngcontent-35="" class="line-number">29</pre><pre _ngcontent-35="" class="line-number">30</pre><pre _ngcontent-35="" class="line-number">31</pre><pre _ngcontent-35="" class="line-number">32</pre><pre _ngcontent-35="" class="line-number">33</pre>
        </div>
        <div _ngcontent-35="" class="line-content"></div><diffbox-container><pre class="line-context">    Chats.update(message.chatId, <span>{</span> <span class="hljs-attr">$set</span>: <span>{</span> <span class="hljs-attr">lastMessage</span>: message <span>}</span> <span>}</span>);</pre><pre class="line-context"> </pre><pre class="line-context">    <span class="hljs-keyword">return</span> messageId;</pre><pre class="line-added">  <span>}</span>,</pre><pre class="line-added">  updateName(name) <span>{</span></pre><pre class="line-added">    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.userId) <span>{</span></pre><pre class="line-added">      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Meteor.Error(<span class="hljs-string">'not-logged-in'</span>,</pre><pre class="line-added">        <span class="hljs-string">'Must be logged in to update his name.'</span>);</pre><pre class="line-added">    <span>}</span></pre><pre class="line-added"> </pre><pre class="line-added">    check(name, <span class="hljs-built_in">String</span>);</pre><pre class="line-added"> </pre><pre class="line-added">    <span class="hljs-keyword">if</span> (name.length === <span class="hljs-number">0</span>) <span>{</span></pre><pre class="line-added">      <span class="hljs-keyword">throw</span> Meteor.Error(<span class="hljs-string">'name-required'</span>, <span class="hljs-string">'Must provide a user name'</span>);</pre><pre class="line-added">    <span>}</span></pre><pre class="line-added"> </pre><pre class="line-added">    <span class="hljs-keyword">return</span> Meteor.users.update(<span class="hljs-keyword">this</span>.userId, <span>{</span> <span class="hljs-attr">$set</span>: <span>{</span> <span class="hljs-string">'profile.name'</span>: name <span>}</span> <span>}</span>);</pre><pre class="line-context">  <span>}</span></pre><pre class="line-context"><span>}</span>);</pre></diffbox-container>
      </div>
      <!--template bindings={}--><div _ngcontent-35="" class="improve-code">
        <a _ngcontent-35="" href="https://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/edit/master/manuals/views/step4.md">Improve this code</a>
      </div>
    </div>
  </div>
</div></diffbox>

<p><code>Meteor</code> sets the user identity in case of a logged in user into the <code>this.userId</code> variable, so we can check if this variable exists in order to verify that the user is logged in.</p>
<p>Now let's add this validation to the <code>newMessage()</code> method we created earlier, and also add the identity of the user to each message he sends.</p>
<diffbox step="4.21" tutorial="whatsapp-meteor-tutorial" _nghost-35="">
<!--template bindings={}--><div _ngcontent-35="">
  <!--template bindings={}--><div _ngcontent-35="" class="diffbox">
    <div _ngcontent-35="" class="title-panel">
      <span _ngcontent-35="" class="step-number">4.21</span> <span _ngcontent-35="" class="commit-summary">Bind user to any new message</span>
      <a _ngcontent-35="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/commit/87eb337bbabd540632eecf784e95e63bf1ee2427">lib/methods.js</a>
    </div>
    <div _ngcontent-35="" class="code-container">
      <div _ngcontent-35="" class="scroll-container">
        <div _ngcontent-35="" class="line-numbers">
          <!--template bindings={}--><pre _ngcontent-35="" class="line-number">3</pre><pre _ngcontent-35="" class="line-number">4</pre><pre _ngcontent-35="" class="line-number">5</pre><pre _ngcontent-35="" class="line-number">6</pre><pre _ngcontent-35="" class="line-number">7</pre><pre _ngcontent-35="" class="line-number">8</pre><pre _ngcontent-35="" class="line-number">9</pre><pre _ngcontent-35="" class="line-number">10</pre><pre _ngcontent-35="" class="line-number">11</pre><pre _ngcontent-35="" class="line-number">12</pre><pre _ngcontent-35="" class="line-number">13</pre><pre _ngcontent-35="" class="line-number"> </pre><pre _ngcontent-35="" class="line-number">15</pre><pre _ngcontent-35="" class="line-number">16</pre><pre _ngcontent-35="" class="line-number">17</pre><pre _ngcontent-35="" class="line-number">18</pre><pre _ngcontent-35="" class="line-number">19</pre><pre _ngcontent-35="" class="line-number">20</pre><pre _ngcontent-35="" class="line-number">21</pre>
        </div>
        <div _ngcontent-35="" class="line-content"></div><diffbox-container><pre class="line-context"> </pre><pre class="line-context">Meteor.methods(<span>{</span></pre><pre class="line-context">  newMessage(message) <span>{</span></pre><pre class="line-added">    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.userId) <span>{</span></pre><pre class="line-added">      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Meteor.Error(<span class="hljs-string">'not-logged-in'</span>,</pre><pre class="line-added">        <span class="hljs-string">'Must be logged in to send message.'</span>);</pre><pre class="line-added">    <span>}</span></pre><pre class="line-added"> </pre><pre class="line-context">    check(message, <span>{</span></pre><pre class="line-context">      type: <span class="hljs-built_in">String</span>,</pre><pre class="line-context">      text: <span class="hljs-built_in">String</span>,</pre><pre class="undefined"><span class="hljs-comment">...some lines skipped...</span></pre><pre class="line-context">    <span>}</span>);</pre><pre class="line-context"> </pre><pre class="line-context">    message.timestamp = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();</pre><pre class="line-added">    message.userId = <span class="hljs-keyword">this</span>.userId;</pre><pre class="line-context"> </pre><pre class="line-context">    <span class="hljs-keyword">const</span> messageId = Messages.insert(message);</pre><pre class="line-context">    Chats.update(message.chatId, <span>{</span> <span class="hljs-attr">$set</span>: <span>{</span> <span class="hljs-attr">lastMessage</span>: message <span>}</span> <span>}</span>);</pre></diffbox-container>
      </div>
      <!--template bindings={}--><div _ngcontent-35="" class="improve-code">
        <a _ngcontent-35="" href="https://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/edit/master/manuals/views/step4.md">Improve this code</a>
      </div>
    </div>
  </div>
</div></diffbox>

<p>Great, now the last missing feature is logout. Let's add a state for the settings view:</p>
<diffbox step="4.22" tutorial="whatsapp-meteor-tutorial" _nghost-35="">
<!--template bindings={}--><div _ngcontent-35="">
  <!--template bindings={}--><div _ngcontent-35="" class="diffbox">
    <div _ngcontent-35="" class="title-panel">
      <span _ngcontent-35="" class="step-number">4.22</span> <span _ngcontent-35="" class="commit-summary">Add settings route state</span>
      <a _ngcontent-35="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/commit/963f4ecd58f05b591037624c1aa9023383b04ed8">client/scripts/routes.js</a>
    </div>
    <div _ngcontent-35="" class="code-container">
      <div _ngcontent-35="" class="scroll-container">
        <div _ngcontent-35="" class="line-numbers">
          <!--template bindings={}--><pre _ngcontent-35="" class="line-number">6</pre><pre _ngcontent-35="" class="line-number">7</pre><pre _ngcontent-35="" class="line-number">8</pre><pre _ngcontent-35="" class="line-number">9</pre><pre _ngcontent-35="" class="line-number">10</pre><pre _ngcontent-35="" class="line-number">11</pre><pre _ngcontent-35="" class="line-number">12</pre><pre _ngcontent-35="" class="line-number"> </pre><pre _ngcontent-35="" class="line-number">61</pre><pre _ngcontent-35="" class="line-number">62</pre><pre _ngcontent-35="" class="line-number">63</pre><pre _ngcontent-35="" class="line-number">64</pre><pre _ngcontent-35="" class="line-number">65</pre><pre _ngcontent-35="" class="line-number">66</pre><pre _ngcontent-35="" class="line-number">67</pre><pre _ngcontent-35="" class="line-number">68</pre><pre _ngcontent-35="" class="line-number">69</pre><pre _ngcontent-35="" class="line-number">70</pre><pre _ngcontent-35="" class="line-number">71</pre><pre _ngcontent-35="" class="line-number">72</pre><pre _ngcontent-35="" class="line-number">73</pre><pre _ngcontent-35="" class="line-number">74</pre><pre _ngcontent-35="" class="line-number">75</pre>
        </div>
        <div _ngcontent-35="" class="line-content"></div><diffbox-container><pre class="line-context"><span class="hljs-keyword">import</span> confirmationTemplateUrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../templates/confirmation.html'</span>;</pre><pre class="line-context"><span class="hljs-keyword">import</span> loginTemplateUrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../templates/login.html'</span>;</pre><pre class="line-context"><span class="hljs-keyword">import</span> profileTemplateUrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../templates/profile.html'</span>;</pre><pre class="line-added"><span class="hljs-keyword">import</span> settingsTemplateUrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../templates/settings.html'</span>;</pre><pre class="line-context"><span class="hljs-keyword">import</span> tabsTemplateUrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../templates/tabs.html'</span>;</pre><pre class="line-context"> </pre><pre class="line-context"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RoutesConfig</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Config</span> </span><span>{</span></pre><pre class="undefined"><span class="hljs-comment">...some lines skipped...</span></pre><pre class="line-context">        resolve: <span>{</span></pre><pre class="line-context">          user: <span class="hljs-keyword">this</span>.isAuthorized</pre><pre class="line-context">        <span>}</span></pre><pre class="line-added">      <span>}</span>)</pre><pre class="line-added">      .state(<span class="hljs-string">'tab.settings'</span>, <span>{</span></pre><pre class="line-added">        url: <span class="hljs-string">'/settings'</span>,</pre><pre class="line-added">        views: <span>{</span></pre><pre class="line-added">          <span class="hljs-string">'tab-settings'</span>: <span>{</span></pre><pre class="line-added">            templateUrl: settingsTemplateUrl,</pre><pre class="line-added">            controller: <span class="hljs-string">'SettingsCtrl as settings'</span>,</pre><pre class="line-added">          <span>}</span></pre><pre class="line-added">        <span>}</span></pre><pre class="line-context">      <span>}</span>);</pre><pre class="line-context"> </pre><pre class="line-context">    <span class="hljs-keyword">this</span>.$urlRouterProvider.otherwise(<span class="hljs-string">'tab/chats'</span>);</pre></diffbox-container>
      </div>
      <!--template bindings={}--><div _ngcontent-35="" class="improve-code">
        <a _ngcontent-35="" href="https://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/edit/master/manuals/views/step4.md">Improve this code</a>
      </div>
    </div>
  </div>
</div></diffbox>

<p>And create the view which contains the logout button:</p>
<diffbox step="4.23" tutorial="whatsapp-meteor-tutorial" _nghost-35="">
<!--template bindings={}--><div _ngcontent-35="">
  <!--template bindings={}--><div _ngcontent-35="" class="diffbox">
    <div _ngcontent-35="" class="title-panel">
      <span _ngcontent-35="" class="step-number">4.23</span> <span _ngcontent-35="" class="commit-summary">Add settings view</span>
      <a _ngcontent-35="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/commit/c469df45c1262b67d84e85d05b31dd199e6495cd">client/templates/settings.html</a>
    </div>
    <div _ngcontent-35="" class="code-container">
      <div _ngcontent-35="" class="scroll-container">
        <div _ngcontent-35="" class="line-numbers">
          <!--template bindings={}--><pre _ngcontent-35="" class="line-number">1</pre><pre _ngcontent-35="" class="line-number">2</pre><pre _ngcontent-35="" class="line-number">3</pre><pre _ngcontent-35="" class="line-number">4</pre><pre _ngcontent-35="" class="line-number">5</pre><pre _ngcontent-35="" class="line-number">6</pre><pre _ngcontent-35="" class="line-number">7</pre>
        </div>
        <div _ngcontent-35="" class="line-content"></div><diffbox-container><pre class="line-added"><span class="hljs-tag">&lt;<span class="hljs-name">ion-view</span> <span class="hljs-attr">view-title</span>=<span class="hljs-string">"Settings"</span>&gt;</span></pre><pre class="line-added">  <span class="hljs-tag">&lt;<span class="hljs-name">ion-content</span>&gt;</span></pre><pre class="line-added">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"padding text-center"</span>&gt;</span></pre><pre class="line-added">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">ng-click</span>=<span class="hljs-string">"settings.logout()"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button button-clear button-assertive"</span>&gt;</span>Logout<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></pre><pre class="line-added">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre><pre class="line-added">  <span class="hljs-tag">&lt;/<span class="hljs-name">ion-content</span>&gt;</span></pre><pre class="line-added"><span class="hljs-tag">&lt;/<span class="hljs-name">ion-view</span>&gt;</span></pre></diffbox-container>
      </div>
      <!--template bindings={}--><div _ngcontent-35="" class="improve-code">
        <a _ngcontent-35="" href="https://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/edit/master/manuals/views/step4.md">Improve this code</a>
      </div>
    </div>
  </div>
</div></diffbox>

<p>Now let's implement this method inside the <code>SettingsCtrl</code>:</p>
<diffbox step="4.24" tutorial="whatsapp-meteor-tutorial" _nghost-35="">
<!--template bindings={}--><div _ngcontent-35="">
  <!--template bindings={}--><div _ngcontent-35="" class="diffbox">
    <div _ngcontent-35="" class="title-panel">
      <span _ngcontent-35="" class="step-number">4.24</span> <span _ngcontent-35="" class="commit-summary">Add settings controller</span>
      <a _ngcontent-35="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/commit/9f09f7d85ecb4c32cddd2af5f625e52a8ff8a2e6">client/scripts/controllers/settings.controller.js</a>
    </div>
    <div _ngcontent-35="" class="code-container">
      <div _ngcontent-35="" class="scroll-container">
        <div _ngcontent-35="" class="line-numbers">
          <!--template bindings={}--><pre _ngcontent-35="" class="line-number">1</pre><pre _ngcontent-35="" class="line-number">2</pre><pre _ngcontent-35="" class="line-number">3</pre><pre _ngcontent-35="" class="line-number">4</pre><pre _ngcontent-35="" class="line-number">5</pre><pre _ngcontent-35="" class="line-number">6</pre><pre _ngcontent-35="" class="line-number">7</pre><pre _ngcontent-35="" class="line-number">8</pre><pre _ngcontent-35="" class="line-number">9</pre><pre _ngcontent-35="" class="line-number">10</pre><pre _ngcontent-35="" class="line-number">11</pre><pre _ngcontent-35="" class="line-number">12</pre><pre _ngcontent-35="" class="line-number">13</pre><pre _ngcontent-35="" class="line-number">14</pre><pre _ngcontent-35="" class="line-number">15</pre><pre _ngcontent-35="" class="line-number">16</pre><pre _ngcontent-35="" class="line-number">17</pre><pre _ngcontent-35="" class="line-number">18</pre><pre _ngcontent-35="" class="line-number">19</pre><pre _ngcontent-35="" class="line-number">20</pre><pre _ngcontent-35="" class="line-number">21</pre><pre _ngcontent-35="" class="line-number">22</pre><pre _ngcontent-35="" class="line-number">23</pre>
        </div>
        <div _ngcontent-35="" class="line-content"></div><diffbox-container><pre class="line-added"><span class="hljs-keyword">import</span> <span>{</span> Meteor <span>}</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'meteor/meteor'</span>;</pre><pre class="line-added"><span class="hljs-keyword">import</span> <span>{</span> Controller <span>}</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'angular-ecmascript/module-helpers'</span>;</pre><pre class="line-added"> </pre><pre class="line-added"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SettingsCtrl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span> </span><span>{</span></pre><pre class="line-added">  logout() <span>{</span></pre><pre class="line-added">    Meteor.logout(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> <span>{</span></pre><pre class="line-added">      <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.handleError(err);</pre><pre class="line-added">      <span class="hljs-keyword">this</span>.$state.go(<span class="hljs-string">'login'</span>);</pre><pre class="line-added">    <span>}</span>)</pre><pre class="line-added">  <span>}</span></pre><pre class="line-added"> </pre><pre class="line-added">  handleError (err) <span>{</span></pre><pre class="line-added">    <span class="hljs-keyword">this</span>.$log.error(<span class="hljs-string">'Settings modification error'</span>, err);</pre><pre class="line-added"> </pre><pre class="line-added">    <span class="hljs-keyword">this</span>.$ionicPopup.alert(<span>{</span></pre><pre class="line-added">      title: err.reason || <span class="hljs-string">'Settings modification failed'</span>,</pre><pre class="line-added">      template: <span class="hljs-string">'Please try again'</span>,</pre><pre class="line-added">      okType: <span class="hljs-string">'button-positive button-clear'</span></pre><pre class="line-added">    <span>}</span>);</pre><pre class="line-added">  <span>}</span></pre><pre class="line-added"><span>}</span></pre><pre class="line-added"> </pre><pre class="line-added">SettingsCtrl.$inject = [<span class="hljs-string">'$state'</span>, <span class="hljs-string">'$ionicPopup'</span>, <span class="hljs-string">'$log'</span>];</pre></diffbox-container>
      </div>
      <!--template bindings={}--><div _ngcontent-35="" class="improve-code">
        <a _ngcontent-35="" href="https://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/edit/master/manuals/views/step4.md">Improve this code</a>
      </div>
    </div>
  </div>
</div></diffbox>

<diffbox step="4.25" tutorial="whatsapp-meteor-tutorial" _nghost-35="">
<!--template bindings={}--><div _ngcontent-35="">
  <!--template bindings={}--><div _ngcontent-35="" class="diffbox">
    <div _ngcontent-35="" class="title-panel">
      <span _ngcontent-35="" class="step-number">4.25</span> <span _ngcontent-35="" class="commit-summary">Load settings controller</span>
      <a _ngcontent-35="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/commit/df1621662d8dc0361f732ee8d6f6c72c8de623f6">client/scripts/lib/app.js</a>
    </div>
    <div _ngcontent-35="" class="code-container">
      <div _ngcontent-35="" class="scroll-container">
        <div _ngcontent-35="" class="line-numbers">
          <!--template bindings={}--><pre _ngcontent-35="" class="line-number">16</pre><pre _ngcontent-35="" class="line-number">17</pre><pre _ngcontent-35="" class="line-number">18</pre><pre _ngcontent-35="" class="line-number">19</pre><pre _ngcontent-35="" class="line-number">20</pre><pre _ngcontent-35="" class="line-number">21</pre><pre _ngcontent-35="" class="line-number">22</pre><pre _ngcontent-35="" class="line-number"> </pre><pre _ngcontent-35="" class="line-number">37</pre><pre _ngcontent-35="" class="line-number">38</pre><pre _ngcontent-35="" class="line-number">39</pre><pre _ngcontent-35="" class="line-number">40</pre><pre _ngcontent-35="" class="line-number">41</pre><pre _ngcontent-35="" class="line-number">42</pre><pre _ngcontent-35="" class="line-number">43</pre>
        </div>
        <div _ngcontent-35="" class="line-content"></div><diffbox-container><pre class="line-context"><span class="hljs-keyword">import</span> ConfirmationCtrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../controllers/confirmation.controller'</span>;</pre><pre class="line-context"><span class="hljs-keyword">import</span> LoginCtrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../controllers/login.controller'</span>;</pre><pre class="line-context"><span class="hljs-keyword">import</span> ProfileCtrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../controllers/profile.controller'</span>;</pre><pre class="line-added"><span class="hljs-keyword">import</span> SettingsCtrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../controllers/settings.controller'</span>;</pre><pre class="line-context"><span class="hljs-keyword">import</span> InputDirective <span class="hljs-keyword">from</span> <span class="hljs-string">'../directives/input.directive'</span>;</pre><pre class="line-context"><span class="hljs-keyword">import</span> CalendarFilter <span class="hljs-keyword">from</span> <span class="hljs-string">'../filters/calendar.filter'</span>;</pre><pre class="line-context"><span class="hljs-keyword">import</span> Routes <span class="hljs-keyword">from</span> <span class="hljs-string">'../routes'</span>;</pre><pre class="undefined"><span class="hljs-comment">...some lines skipped...</span></pre><pre class="line-context">  .load(ConfirmationCtrl)</pre><pre class="line-context">  .load(LoginCtrl)</pre><pre class="line-context">  .load(ProfileCtrl)</pre><pre class="line-added">  .load(SettingsCtrl)</pre><pre class="line-context">  .load(InputDirective)</pre><pre class="line-context">  .load(CalendarFilter)</pre><pre class="line-context">  .load(Routes);</pre></diffbox-container>
      </div>
      <!--template bindings={}--><div _ngcontent-35="" class="improve-code">
        <a _ngcontent-35="" href="https://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/edit/master/manuals/views/step4.md">Improve this code</a>
      </div>
    </div>
  </div>
</div></diffbox>


<p>We also need to modify the way we identify our users inside the messages list, so let's do it:</p>
<diffbox step="4.26" tutorial="whatsapp-meteor-tutorial" _nghost-35="">
<!--template bindings={}--><div _ngcontent-35="">
  <!--template bindings={}--><div _ngcontent-35="" class="diffbox">
    <div _ngcontent-35="" class="title-panel">
      <span _ngcontent-35="" class="step-number">4.26</span> <span _ngcontent-35="" class="commit-summary">Classify message ownership</span>
      <a _ngcontent-35="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/commit/9f734086e3e1a6346315a9603ad531d924788192">client/templates/chat.html</a>
    </div>
    <div _ngcontent-35="" class="code-container">
      <div _ngcontent-35="" class="scroll-container">
        <div _ngcontent-35="" class="line-numbers">
          <!--template bindings={}--><pre _ngcontent-35="" class="line-number">5</pre><pre _ngcontent-35="" class="line-number">6</pre><pre _ngcontent-35="" class="line-number">7</pre><pre _ngcontent-35="" class="line-number">8</pre><pre _ngcontent-35="" class="line-number">9</pre><pre _ngcontent-35="" class="line-number">10</pre><pre _ngcontent-35="" class="line-number">11</pre>
        </div>
        <div _ngcontent-35="" class="line-content"></div><diffbox-container><pre class="line-context">  <span class="hljs-tag">&lt;<span class="hljs-name">ion-content</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"chat"</span> <span class="hljs-attr">delegate-handle</span>=<span class="hljs-string">"chatScroll"</span>&gt;</span></pre><pre class="line-context">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"message-list"</span>&gt;</span></pre><pre class="line-context">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ng-repeat</span>=<span class="hljs-string">"message in chat.messages"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"message-wrapper"</span>&gt;</span></pre><pre class="line-added">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"message"</span> <span class="hljs-attr">ng-class</span>=<span class="hljs-string">"message.userId === $root.currentUser._id ? 'message-mine' : 'message-other'"</span>&gt;</span></pre><pre class="line-context">          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"message-text"</span>&gt;</span><span>{</span><span>{</span> message.text <span>}</span><span>}</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre><pre class="line-context">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"message-timestamp"</span>&gt;</span><span>{</span><span>{</span> message.timestamp | amDateFormat: 'HH:mm' <span>}</span><span>}</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></pre><pre class="line-context">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre></diffbox-container>
      </div>
      <!--template bindings={}--><div _ngcontent-35="" class="improve-code">
        <a _ngcontent-35="" href="https://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/edit/master/manuals/views/step4.md">Improve this code</a>
      </div>
    </div>
  </div>
</div></diffbox>

<p>And the last missing feature is about adding auto-scroll to the messages list in order to keep the view scrolled down when new messages arrive:</p>
<diffbox step="4.27" tutorial="whatsapp-meteor-tutorial" _nghost-35="">
<!--template bindings={}--><div _ngcontent-35="">
  <!--template bindings={}--><div _ngcontent-35="" class="diffbox">
    <div _ngcontent-35="" class="title-panel">
      <span _ngcontent-35="" class="step-number">4.27</span> <span _ngcontent-35="" class="commit-summary">Add auto-scroll to chat controller</span>
      <a _ngcontent-35="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/commit/2856a230a9079c4b378c36fc90be6a9b3dcd7414">client/scripts/controllers/chat.controller.js</a>
    </div>
    <div _ngcontent-35="" class="code-container">
      <div _ngcontent-35="" class="scroll-container">
        <div _ngcontent-35="" class="line-numbers">
          <!--template bindings={}--><pre _ngcontent-35="" class="line-number">20</pre><pre _ngcontent-35="" class="line-number">21</pre><pre _ngcontent-35="" class="line-number">22</pre><pre _ngcontent-35="" class="line-number">23</pre><pre _ngcontent-35="" class="line-number">24</pre><pre _ngcontent-35="" class="line-number">25</pre><pre _ngcontent-35="" class="line-number">26</pre><pre _ngcontent-35="" class="line-number">27</pre><pre _ngcontent-35="" class="line-number"> </pre><pre _ngcontent-35="" class="line-number">58</pre><pre _ngcontent-35="" class="line-number">59</pre><pre _ngcontent-35="" class="line-number">60</pre><pre _ngcontent-35="" class="line-number">61</pre><pre _ngcontent-35="" class="line-number">62</pre><pre _ngcontent-35="" class="line-number">63</pre><pre _ngcontent-35="" class="line-number">64</pre><pre _ngcontent-35="" class="line-number">65</pre><pre _ngcontent-35="" class="line-number">66</pre><pre _ngcontent-35="" class="line-number">67</pre><pre _ngcontent-35="" class="line-number">68</pre><pre _ngcontent-35="" class="line-number">69</pre><pre _ngcontent-35="" class="line-number">70</pre><pre _ngcontent-35="" class="line-number">71</pre><pre _ngcontent-35="" class="line-number">72</pre><pre _ngcontent-35="" class="line-number">73</pre><pre _ngcontent-35="" class="line-number">74</pre>
        </div>
        <div _ngcontent-35="" class="line-content"></div><diffbox-container><pre class="line-context">        <span class="hljs-keyword">return</span> Chats.findOne(<span class="hljs-keyword">this</span>.chatId);</pre><pre class="line-context">      <span>}</span></pre><pre class="line-context">    <span>}</span>);</pre><pre class="line-added"> </pre><pre class="line-added">    <span class="hljs-keyword">this</span>.autoScroll();</pre><pre class="line-context">  <span>}</span></pre><pre class="line-context"> </pre><pre class="line-context">  sendMessage() <span>{</span></pre><pre class="undefined"><span class="hljs-comment">...some lines skipped...</span></pre><pre class="line-context">    <span>}</span></pre><pre class="line-context">  <span>}</span></pre><pre class="line-context"> </pre><pre class="line-added">  autoScroll() <span>{</span></pre><pre class="line-added">    <span class="hljs-keyword">let</span> recentMessagesNum = <span class="hljs-keyword">this</span>.messages.length;</pre><pre class="line-added"> </pre><pre class="line-added">    <span class="hljs-keyword">this</span>.autorun(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span>{</span></pre><pre class="line-added">      <span class="hljs-keyword">const</span> currMessagesNum = <span class="hljs-keyword">this</span>.getCollectionReactively(<span class="hljs-string">'messages'</span>).length;</pre><pre class="line-added">      <span class="hljs-keyword">const</span> animate = recentMessagesNum != currMessagesNum;</pre><pre class="line-added">      recentMessagesNum = currMessagesNum;</pre><pre class="line-added">      <span class="hljs-keyword">this</span>.scrollBottom(animate);</pre><pre class="line-added">    <span>}</span>);</pre><pre class="line-added">  <span>}</span></pre><pre class="line-added"> </pre><pre class="line-context">  scrollBottom(animate) <span>{</span></pre><pre class="line-context">    <span class="hljs-keyword">this</span>.$timeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span>{</span></pre><pre class="line-context">      <span class="hljs-keyword">this</span>.$ionicScrollDelegate.$getByHandle(<span class="hljs-string">'chatScroll'</span>).scrollBottom(animate);</pre></diffbox-container>
      </div>
      <!--template bindings={}--><div _ngcontent-35="" class="improve-code">
        <a _ngcontent-35="" href="https://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/edit/master/manuals/views/step4.md">Improve this code</a>
      </div>
    </div>
  </div>
</div></diffbox>
</tutorial-container><!--template bindings={}-->
      <br><br>
      <div class="top-navigation">
        <div class="tutorial-nav">
          <a class="md-primary tutorial-button" md-raised-button="" tutorialNavigation="previous" aria-disabled="false" href="/tutorials/whatsapp/meteor/meteor-server-methods"><span class="md-button-wrapper">
            <span class="button-wrapper"><i class="material-icons">navigate_before</i>Previous</span>
          </span> </a>
          <a class="md-primary tutorial-button" codeDiffLink="" md-raised-button="" aria-disabled="false" href="https://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/compare/step4...step5"><span class="md-button-wrapper">
            <span class="button-wrapper"><i class="material-icons">search</i>Code Diff</span>
          </span> </a>
          <a class="md-primary tutorial-button" md-raised-button="" tutorialNavigation="next" aria-disabled="false" href="/tutorials/whatsapp/meteor/modify-chats"><span class="md-button-wrapper">
            <span class="button-wrapper right-icon">Next<i class="material-icons">navigate_next</i></span>
          </span> </a>
        </div>

        <div class="improve">
          <a class="md-primary improv-button tutorial-button" md-raised-button="" href="https://github.com/Urigo/Ionic-MeteorCLI-WhatsApp/edit/master/manuals/templates/step4.md" aria-disabled="false"><span class="md-button-wrapper">
            <span class="button-wrapper"><i class="material-icons">mode_edit</i>Improve This Tutorial</span>
          </span> </a>
        </div>
      </div>
    </div>
  </div>
</div>
</tutorial>

</app>

  <!-- Google Tag Manager -->
  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PKC4D4"
                    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-PKC4D4');</script>
  <!-- End Google Tag Manager -->



<style type="text/css">@charset "UTF-8";.hljs{background:#f0f0f0}.hljs-doctag,.hljs-meta-keyword{font-weight:700}.hljs-deletion,.hljs-selector-class,.hljs-template-tag{color:#800}.hljs-selector-attr,.hljs-selector-pseudo{color:#bc6060}.hljs-addition,.hljs-code{color:#397300}.hljs-meta-string{color:#4d99bf}.hljs{display:block;overflow-x:auto;padding:.5em;color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag{color:#333;font-weight:700}.hljs-subst{color:#333}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@font-face{font-family:'FontAwesome';src:url(assets/fonts/fontawesome-webfont.eot?v=4.7.0);src:url(assets/fonts/fontawesome-webfont.eot?#iefix&v=4.7.0) format("embedded-opentype"),url(assets/fonts/fontawesome-webfont.woff2?v=4.7.0) format("woff2"),url(assets/fonts/fontawesome-webfont.woff?v=4.7.0) format("woff"),url(assets/fonts/fontawesome-webfont.ttf?v=4.7.0) format("truetype"),url(assets/fonts/fontawesome-webfont.svg?v=4.7.0#fontawesomeregular) format("svg");font-weight:400;font-style:normal}.fa{display:inline-block;font:14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.fa-lg{font-size:1.33333em;line-height:.75em;vertical-align:-15%}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-fw{width:1.28571em;text-align:center}.fa-ul{padding-left:0;margin-left:2.14286em;list-style-type:none}.fa-ul>li{position:relative}.fa-li{position:absolute;left:-2.14286em;width:2.14286em;top:.14286em;text-align:center}.fa-li.fa-lg{left:-1.85714em}.fa-border{padding:.2em .25em .15em;border:solid .08em #eee;border-radius:.1em}.fa-pull-left{float:left}.fa-pull-right,.pull-right{float:right}.fa.fa-pull-left{margin-right:.3em}.fa.fa-pull-right{margin-left:.3em}.pull-left{float:left}.fa.pull-left{margin-right:.3em}.fa.pull-right{margin-left:.3em}.fa-spin{-webkit-animation:fa-spin 2s infinite linear;animation:fa-spin 2s infinite linear}.fa-pulse{-webkit-animation:fa-spin 1s infinite steps(8);animation:fa-spin 1s infinite steps(8)}@-webkit-keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.fa-rotate-90{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg)}.fa-rotate-180{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg)}.fa-rotate-270{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";-webkit-transform:rotate(270deg);-ms-transform:rotate(270deg);transform:rotate(270deg)}.fa-flip-horizontal{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";-webkit-transform:scale(-1,1);-ms-transform:scale(-1,1);transform:scale(-1,1)}.fa-flip-vertical{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";-webkit-transform:scale(1,-1);-ms-transform:scale(1,-1);transform:scale(1,-1)}:root .fa-flip-horizontal,:root .fa-flip-vertical,:root .fa-rotate-180,:root .fa-rotate-270,:root .fa-rotate-90{filter:none}.fa-stack{position:relative;display:inline-block;width:2em;height:2em;line-height:2em;vertical-align:middle}.fa-stack-1x,.fa-stack-2x{position:absolute;left:0;width:100%;text-align:center}.fa-stack-1x{line-height:inherit}.fa-stack-2x{font-size:2em}.fa-inverse{color:#fff}.fa-glass:before{content:""}.fa-music:before{content:""}.fa-search:before{content:""}.fa-envelope-o:before{content:""}.fa-heart:before{content:""}.fa-star:before{content:""}.fa-star-o:before{content:""}.fa-user:before{content:""}.fa-film:before{content:""}.fa-th-large:before{content:""}.fa-th:before{content:""}.fa-th-list:before{content:""}.fa-check:before{content:""}.fa-close:before,.fa-remove:before,.fa-times:before{content:""}.fa-search-plus:before{content:""}.fa-search-minus:before{content:""}.fa-power-off:before{content:""}.fa-signal:before{content:""}.fa-cog:before,.fa-gear:before{content:""}.fa-trash-o:before{content:""}.fa-home:before{content:""}.fa-file-o:before{content:""}.fa-clock-o:before{content:""}.fa-road:before{content:""}.fa-download:before{content:""}.fa-arrow-circle-o-down:before{content:""}.fa-arrow-circle-o-up:before{content:""}.fa-inbox:before{content:""}.fa-play-circle-o:before{content:""}.fa-repeat:before,.fa-rotate-right:before{content:""}.fa-refresh:before{content:""}.fa-list-alt:before{content:""}.fa-lock:before{content:""}.fa-flag:before{content:""}.fa-headphones:before{content:""}.fa-volume-off:before{content:""}.fa-volume-down:before{content:""}.fa-volume-up:before{content:""}.fa-qrcode:before{content:""}.fa-barcode:before{content:""}.fa-tag:before{content:""}.fa-tags:before{content:""}.fa-book:before{content:""}.fa-bookmark:before{content:""}.fa-print:before{content:""}.fa-camera:before{content:""}.fa-font:before{content:""}.fa-bold:before{content:""}.fa-italic:before{content:""}.fa-text-height:before{content:""}.fa-text-width:before{content:""}.fa-align-left:before{content:""}.fa-align-center:before{content:""}.fa-align-right:before{content:""}.fa-align-justify:before{content:""}.fa-list:before{content:""}.fa-dedent:before,.fa-outdent:before{content:""}.fa-indent:before{content:""}.fa-video-camera:before{content:""}.fa-image:before,.fa-photo:before,.fa-picture-o:before{content:""}.fa-pencil:before{content:""}.fa-map-marker:before{content:""}.fa-adjust:before{content:""}.fa-tint:before{content:""}.fa-edit:before,.fa-pencil-square-o:before{content:""}.fa-share-square-o:before{content:""}.fa-check-square-o:before{content:""}.fa-arrows:before{content:""}.fa-step-backward:before{content:""}.fa-fast-backward:before{content:""}.fa-backward:before{content:""}.fa-play:before{content:""}.fa-pause:before{content:""}.fa-stop:before{content:""}.fa-forward:before{content:""}.fa-fast-forward:before{content:""}.fa-step-forward:before{content:""}.fa-eject:before{content:""}.fa-chevron-left:before{content:""}.fa-chevron-right:before{content:""}.fa-plus-circle:before{content:""}.fa-minus-circle:before{content:""}.fa-times-circle:before{content:""}.fa-check-circle:before{content:""}.fa-question-circle:before{content:""}.fa-info-circle:before{content:""}.fa-crosshairs:before{content:""}.fa-times-circle-o:before{content:""}.fa-check-circle-o:before{content:""}.fa-ban:before{content:""}.fa-arrow-left:before{content:""}.fa-arrow-right:before{content:""}.fa-arrow-up:before{content:""}.fa-arrow-down:before{content:""}.fa-mail-forward:before,.fa-share:before{content:""}.fa-expand:before{content:""}.fa-compress:before{content:""}.fa-plus:before{content:""}.fa-minus:before{content:""}.fa-asterisk:before{content:""}.fa-exclamation-circle:before{content:""}.fa-gift:before{content:""}.fa-leaf:before{content:""}.fa-fire:before{content:""}.fa-eye:before{content:""}.fa-eye-slash:before{content:""}.fa-exclamation-triangle:before,.fa-warning:before{content:""}.fa-plane:before{content:""}.fa-calendar:before{content:""}.fa-random:before{content:""}.fa-comment:before{content:""}.fa-magnet:before{content:""}.fa-chevron-up:before{content:""}.fa-chevron-down:before{content:""}.fa-retweet:before{content:""}.fa-shopping-cart:before{content:""}.fa-folder:before{content:""}.fa-folder-open:before{content:""}.fa-arrows-v:before{content:""}.fa-arrows-h:before{content:""}.fa-bar-chart-o:before,.fa-bar-chart:before{content:""}.fa-twitter-square:before{content:""}.fa-facebook-square:before{content:""}.fa-camera-retro:before{content:""}.fa-key:before{content:""}.fa-cogs:before,.fa-gears:before{content:""}.fa-comments:before{content:""}.fa-thumbs-o-up:before{content:""}.fa-thumbs-o-down:before{content:""}.fa-star-half:before{content:""}.fa-heart-o:before{content:""}.fa-sign-out:before{content:""}.fa-linkedin-square:before{content:""}.fa-thumb-tack:before{content:""}.fa-external-link:before{content:""}.fa-sign-in:before{content:""}.fa-trophy:before{content:""}.fa-github-square:before{content:""}.fa-upload:before{content:""}.fa-lemon-o:before{content:""}.fa-phone:before{content:""}.fa-square-o:before{content:""}.fa-bookmark-o:before{content:""}.fa-phone-square:before{content:""}.fa-twitter:before{content:""}.fa-facebook-f:before,.fa-facebook:before{content:""}.fa-github:before{content:""}.fa-unlock:before{content:""}.fa-credit-card:before{content:""}.fa-feed:before,.fa-rss:before{content:""}.fa-hdd-o:before{content:""}.fa-bullhorn:before{content:""}.fa-bell:before{content:""}.fa-certificate:before{content:""}.fa-hand-o-right:before{content:""}.fa-hand-o-left:before{content:""}.fa-hand-o-up:before{content:""}.fa-hand-o-down:before{content:""}.fa-arrow-circle-left:before{content:""}.fa-arrow-circle-right:before{content:""}.fa-arrow-circle-up:before{content:""}.fa-arrow-circle-down:before{content:""}.fa-globe:before{content:""}.fa-wrench:before{content:""}.fa-tasks:before{content:""}.fa-filter:before{content:""}.fa-briefcase:before{content:""}.fa-arrows-alt:before{content:""}.fa-group:before,.fa-users:before{content:""}.fa-chain:before,.fa-link:before{content:""}.fa-cloud:before{content:""}.fa-flask:before{content:""}.fa-cut:before,.fa-scissors:before{content:""}.fa-copy:before,.fa-files-o:before{content:""}.fa-paperclip:before{content:""}.fa-floppy-o:before,.fa-save:before{content:""}.fa-square:before{content:""}.fa-bars:before,.fa-navicon:before,.fa-reorder:before{content:""}.fa-list-ul:before{content:""}.fa-list-ol:before{content:""}.fa-strikethrough:before{content:""}.fa-underline:before{content:""}.fa-table:before{content:""}.fa-magic:before{content:""}.fa-truck:before{content:""}.fa-pinterest:before{content:""}.fa-pinterest-square:before{content:""}.fa-google-plus-square:before{content:""}.fa-google-plus:before{content:""}.fa-money:before{content:""}.fa-caret-down:before{content:""}.fa-caret-up:before{content:""}.fa-caret-left:before{content:""}.fa-caret-right:before{content:""}.fa-columns:before{content:""}.fa-sort:before,.fa-unsorted:before{content:""}.fa-sort-desc:before,.fa-sort-down:before{content:""}.fa-sort-asc:before,.fa-sort-up:before{content:""}.fa-envelope:before{content:""}.fa-linkedin:before{content:""}.fa-rotate-left:before,.fa-undo:before{content:""}.fa-gavel:before,.fa-legal:before{content:""}.fa-dashboard:before,.fa-tachometer:before{content:""}.fa-comment-o:before{content:""}.fa-comments-o:before{content:""}.fa-bolt:before,.fa-flash:before{content:""}.fa-sitemap:before{content:""}.fa-umbrella:before{content:""}.fa-clipboard:before,.fa-paste:before{content:""}.fa-lightbulb-o:before{content:""}.fa-exchange:before{content:""}.fa-cloud-download:before{content:""}.fa-cloud-upload:before{content:""}.fa-user-md:before{content:""}.fa-stethoscope:before{content:""}.fa-suitcase:before{content:""}.fa-bell-o:before{content:""}.fa-coffee:before{content:""}.fa-cutlery:before{content:""}.fa-file-text-o:before{content:""}.fa-building-o:before{content:""}.fa-hospital-o:before{content:""}.fa-ambulance:before{content:""}.fa-medkit:before{content:""}.fa-fighter-jet:before{content:""}.fa-beer:before{content:""}.fa-h-square:before{content:""}.fa-plus-square:before{content:""}.fa-angle-double-left:before{content:""}.fa-angle-double-right:before{content:""}.fa-angle-double-up:before{content:""}.fa-angle-double-down:before{content:""}.fa-angle-left:before{content:""}.fa-angle-right:before{content:""}.fa-angle-up:before{content:""}.fa-angle-down:before{content:""}.fa-desktop:before{content:""}.fa-laptop:before{content:""}.fa-tablet:before{content:""}.fa-mobile-phone:before,.fa-mobile:before{content:""}.fa-circle-o:before{content:""}.fa-quote-left:before{content:""}.fa-quote-right:before{content:""}.fa-spinner:before{content:""}.fa-circle:before{content:""}.fa-mail-reply:before,.fa-reply:before{content:""}.fa-github-alt:before{content:""}.fa-folder-o:before{content:""}.fa-folder-open-o:before{content:""}.fa-smile-o:before{content:""}.fa-frown-o:before{content:""}.fa-meh-o:before{content:""}.fa-gamepad:before{content:""}.fa-keyboard-o:before{content:""}.fa-flag-o:before{content:""}.fa-flag-checkered:before{content:""}.fa-terminal:before{content:""}.fa-code:before{content:""}.fa-mail-reply-all:before,.fa-reply-all:before{content:""}.fa-star-half-empty:before,.fa-star-half-full:before,.fa-star-half-o:before{content:""}.fa-location-arrow:before{content:""}.fa-crop:before{content:""}.fa-code-fork:before{content:""}.fa-chain-broken:before,.fa-unlink:before{content:""}.fa-question:before{content:""}.fa-info:before{content:""}.fa-exclamation:before{content:""}.fa-superscript:before{content:""}.fa-subscript:before{content:""}.fa-eraser:before{content:""}.fa-puzzle-piece:before{content:""}.fa-microphone:before{content:""}.fa-microphone-slash:before{content:""}.fa-shield:before{content:""}.fa-calendar-o:before{content:""}.fa-fire-extinguisher:before{content:""}.fa-rocket:before{content:""}.fa-maxcdn:before{content:""}.fa-chevron-circle-left:before{content:""}.fa-chevron-circle-right:before{content:""}.fa-chevron-circle-up:before{content:""}.fa-chevron-circle-down:before{content:""}.fa-html5:before{content:""}.fa-css3:before{content:""}.fa-anchor:before{content:""}.fa-unlock-alt:before{content:""}.fa-bullseye:before{content:""}.fa-ellipsis-h:before{content:""}.fa-ellipsis-v:before{content:""}.fa-rss-square:before{content:""}.fa-play-circle:before{content:""}.fa-ticket:before{content:""}.fa-minus-square:before{content:""}.fa-minus-square-o:before{content:""}.fa-level-up:before{content:""}.fa-level-down:before{content:""}.fa-check-square:before{content:""}.fa-pencil-square:before{content:""}.fa-external-link-square:before{content:""}.fa-share-square:before{content:""}.fa-compass:before{content:""}.fa-caret-square-o-down:before,.fa-toggle-down:before{content:""}.fa-caret-square-o-up:before,.fa-toggle-up:before{content:""}.fa-caret-square-o-right:before,.fa-toggle-right:before{content:""}.fa-eur:before,.fa-euro:before{content:""}.fa-gbp:before{content:""}.fa-dollar:before,.fa-usd:before{content:""}.fa-inr:before,.fa-rupee:before{content:""}.fa-cny:before,.fa-jpy:before,.fa-rmb:before,.fa-yen:before{content:""}.fa-rouble:before,.fa-rub:before,.fa-ruble:before{content:""}.fa-krw:before,.fa-won:before{content:""}.fa-bitcoin:before,.fa-btc:before{content:""}.fa-file:before{content:""}.fa-file-text:before{content:""}.fa-sort-alpha-asc:before{content:""}.fa-sort-alpha-desc:before{content:""}.fa-sort-amount-asc:before{content:""}.fa-sort-amount-desc:before{content:""}.fa-sort-numeric-asc:before{content:""}.fa-sort-numeric-desc:before{content:""}.fa-thumbs-up:before{content:""}.fa-thumbs-down:before{content:""}.fa-youtube-square:before{content:""}.fa-youtube:before{content:""}.fa-xing:before{content:""}.fa-xing-square:before{content:""}.fa-youtube-play:before{content:""}.fa-dropbox:before{content:""}.fa-stack-overflow:before{content:""}.fa-instagram:before{content:""}.fa-flickr:before{content:""}.fa-adn:before{content:""}.fa-bitbucket:before{content:""}.fa-bitbucket-square:before{content:""}.fa-tumblr:before{content:""}.fa-tumblr-square:before{content:""}.fa-long-arrow-down:before{content:""}.fa-long-arrow-up:before{content:""}.fa-long-arrow-left:before{content:""}.fa-long-arrow-right:before{content:""}.fa-apple:before{content:""}.fa-windows:before{content:""}.fa-android:before{content:""}.fa-linux:before{content:""}.fa-dribbble:before{content:""}.fa-skype:before{content:""}.fa-foursquare:before{content:""}.fa-trello:before{content:""}.fa-female:before{content:""}.fa-male:before{content:""}.fa-gittip:before,.fa-gratipay:before{content:""}.fa-sun-o:before{content:""}.fa-moon-o:before{content:""}.fa-archive:before{content:""}.fa-bug:before{content:""}.fa-vk:before{content:""}.fa-weibo:before{content:""}.fa-renren:before{content:""}.fa-pagelines:before{content:""}.fa-stack-exchange:before{content:""}.fa-arrow-circle-o-right:before{content:""}.fa-arrow-circle-o-left:before{content:""}.fa-caret-square-o-left:before,.fa-toggle-left:before{content:""}.fa-dot-circle-o:before{content:""}.fa-wheelchair:before{content:""}.fa-vimeo-square:before{content:""}.fa-try:before,.fa-turkish-lira:before{content:""}.fa-plus-square-o:before{content:""}.fa-space-shuttle:before{content:""}.fa-slack:before{content:""}.fa-envelope-square:before{content:""}.fa-wordpress:before{content:""}.fa-openid:before{content:""}.fa-bank:before,.fa-institution:before,.fa-university:before{content:""}.fa-graduation-cap:before,.fa-mortar-board:before{content:""}.fa-yahoo:before{content:""}.fa-google:before{content:""}.fa-reddit:before{content:""}.fa-reddit-square:before{content:""}.fa-stumbleupon-circle:before{content:""}.fa-stumbleupon:before{content:""}.fa-delicious:before{content:""}.fa-digg:before{content:""}.fa-pied-piper-pp:before{content:""}.fa-pied-piper-alt:before{content:""}.fa-drupal:before{content:""}.fa-joomla:before{content:""}.fa-language:before{content:""}.fa-fax:before{content:""}.fa-building:before{content:""}.fa-child:before{content:""}.fa-paw:before{content:""}.fa-spoon:before{content:""}.fa-cube:before{content:""}.fa-cubes:before{content:""}.fa-behance:before{content:""}.fa-behance-square:before{content:""}.fa-steam:before{content:""}.fa-steam-square:before{content:""}.fa-recycle:before{content:""}.fa-automobile:before,.fa-car:before{content:""}.fa-cab:before,.fa-taxi:before{content:""}.fa-tree:before{content:""}.fa-spotify:before{content:""}.fa-deviantart:before{content:""}.fa-soundcloud:before{content:""}.fa-database:before{content:""}.fa-file-pdf-o:before{content:""}.fa-file-word-o:before{content:""}.fa-file-excel-o:before{content:""}.fa-file-powerpoint-o:before{content:""}.fa-file-image-o:before,.fa-file-photo-o:before,.fa-file-picture-o:before{content:""}.fa-file-archive-o:before,.fa-file-zip-o:before{content:""}.fa-file-audio-o:before,.fa-file-sound-o:before{content:""}.fa-file-movie-o:before,.fa-file-video-o:before{content:""}.fa-file-code-o:before{content:""}.fa-vine:before{content:""}.fa-codepen:before{content:""}.fa-jsfiddle:before{content:""}.fa-life-bouy:before,.fa-life-buoy:before,.fa-life-ring:before,.fa-life-saver:before,.fa-support:before{content:""}.fa-circle-o-notch:before{content:""}.fa-ra:before,.fa-rebel:before,.fa-resistance:before{content:""}.fa-empire:before,.fa-ge:before{content:""}.fa-git-square:before{content:""}.fa-git:before{content:""}.fa-hacker-news:before,.fa-y-combinator-square:before,.fa-yc-square:before{content:""}.fa-tencent-weibo:before{content:""}.fa-qq:before{content:""}.fa-wechat:before,.fa-weixin:before{content:""}.fa-paper-plane:before,.fa-send:before{content:""}.fa-paper-plane-o:before,.fa-send-o:before{content:""}.fa-history:before{content:""}.fa-circle-thin:before{content:""}.fa-header:before{content:""}.fa-paragraph:before{content:""}.fa-sliders:before{content:""}.fa-share-alt:before{content:""}.fa-share-alt-square:before{content:""}.fa-bomb:before{content:""}.fa-futbol-o:before,.fa-soccer-ball-o:before{content:""}.fa-tty:before{content:""}.fa-binoculars:before{content:""}.fa-plug:before{content:""}.fa-slideshare:before{content:""}.fa-twitch:before{content:""}.fa-yelp:before{content:""}.fa-newspaper-o:before{content:""}.fa-wifi:before{content:""}.fa-calculator:before{content:""}.fa-paypal:before{content:""}.fa-google-wallet:before{content:""}.fa-cc-visa:before{content:""}.fa-cc-mastercard:before{content:""}.fa-cc-discover:before{content:""}.fa-cc-amex:before{content:""}.fa-cc-paypal:before{content:""}.fa-cc-stripe:before{content:""}.fa-bell-slash:before{content:""}.fa-bell-slash-o:before{content:""}.fa-trash:before{content:""}.fa-copyright:before{content:""}.fa-at:before{content:""}.fa-eyedropper:before{content:""}.fa-paint-brush:before{content:""}.fa-birthday-cake:before{content:""}.fa-area-chart:before{content:""}.fa-pie-chart:before{content:""}.fa-line-chart:before{content:""}.fa-lastfm:before{content:""}.fa-lastfm-square:before{content:""}.fa-toggle-off:before{content:""}.fa-toggle-on:before{content:""}.fa-bicycle:before{content:""}.fa-bus:before{content:""}.fa-ioxhost:before{content:""}.fa-angellist:before{content:""}.fa-cc:before{content:""}.fa-ils:before,.fa-shekel:before,.fa-sheqel:before{content:""}.fa-meanpath:before{content:""}.fa-buysellads:before{content:""}.fa-connectdevelop:before{content:""}.fa-dashcube:before{content:""}.fa-forumbee:before{content:""}.fa-leanpub:before{content:""}.fa-sellsy:before{content:""}.fa-shirtsinbulk:before{content:""}.fa-simplybuilt:before{content:""}.fa-skyatlas:before{content:""}.fa-cart-plus:before{content:""}.fa-cart-arrow-down:before{content:""}.fa-diamond:before{content:""}.fa-ship:before{content:""}.fa-user-secret:before{content:""}.fa-motorcycle:before{content:""}.fa-street-view:before{content:""}.fa-heartbeat:before{content:""}.fa-venus:before{content:""}.fa-mars:before{content:""}.fa-mercury:before{content:""}.fa-intersex:before,.fa-transgender:before{content:""}.fa-transgender-alt:before{content:""}.fa-venus-double:before{content:""}.fa-mars-double:before{content:""}.fa-venus-mars:before{content:""}.fa-mars-stroke:before{content:""}.fa-mars-stroke-v:before{content:""}.fa-mars-stroke-h:before{content:""}.fa-neuter:before{content:""}.fa-genderless:before{content:""}.fa-facebook-official:before{content:""}.fa-pinterest-p:before{content:""}.fa-whatsapp:before{content:""}.fa-server:before{content:""}.fa-user-plus:before{content:""}.fa-user-times:before{content:""}.fa-bed:before,.fa-hotel:before{content:""}.fa-viacoin:before{content:""}.fa-train:before{content:""}.fa-subway:before{content:""}.fa-medium:before{content:""}.fa-y-combinator:before,.fa-yc:before{content:""}.fa-optin-monster:before{content:""}.fa-opencart:before{content:""}.fa-expeditedssl:before{content:""}.fa-battery-4:before,.fa-battery-full:before,.fa-battery:before{content:""}.fa-battery-3:before,.fa-battery-three-quarters:before{content:""}.fa-battery-2:before,.fa-battery-half:before{content:""}.fa-battery-1:before,.fa-battery-quarter:before{content:""}.fa-battery-0:before,.fa-battery-empty:before{content:""}.fa-mouse-pointer:before{content:""}.fa-i-cursor:before{content:""}.fa-object-group:before{content:""}.fa-object-ungroup:before{content:""}.fa-sticky-note:before{content:""}.fa-sticky-note-o:before{content:""}.fa-cc-jcb:before{content:""}.fa-cc-diners-club:before{content:""}.fa-clone:before{content:""}.fa-balance-scale:before{content:""}.fa-hourglass-o:before{content:""}.fa-hourglass-1:before,.fa-hourglass-start:before{content:""}.fa-hourglass-2:before,.fa-hourglass-half:before{content:""}.fa-hourglass-3:before,.fa-hourglass-end:before{content:""}.fa-hourglass:before{content:""}.fa-hand-grab-o:before,.fa-hand-rock-o:before{content:""}.fa-hand-paper-o:before,.fa-hand-stop-o:before{content:""}.fa-hand-scissors-o:before{content:""}.fa-hand-lizard-o:before{content:""}.fa-hand-spock-o:before{content:""}.fa-hand-pointer-o:before{content:""}.fa-hand-peace-o:before{content:""}.fa-trademark:before{content:""}.fa-registered:before{content:""}.fa-creative-commons:before{content:""}.fa-gg:before{content:""}.fa-gg-circle:before{content:""}.fa-tripadvisor:before{content:""}.fa-odnoklassniki:before{content:""}.fa-odnoklassniki-square:before{content:""}.fa-get-pocket:before{content:""}.fa-wikipedia-w:before{content:""}.fa-safari:before{content:""}.fa-chrome:before{content:""}.fa-firefox:before{content:""}.fa-opera:before{content:""}.fa-internet-explorer:before{content:""}.fa-television:before,.fa-tv:before{content:""}.fa-contao:before{content:""}.fa-500px:before{content:""}.fa-amazon:before{content:""}.fa-calendar-plus-o:before{content:""}.fa-calendar-minus-o:before{content:""}.fa-calendar-times-o:before{content:""}.fa-calendar-check-o:before{content:""}.fa-industry:before{content:""}.fa-map-pin:before{content:""}.fa-map-signs:before{content:""}.fa-map-o:before{content:""}.fa-map:before{content:""}.fa-commenting:before{content:""}.fa-commenting-o:before{content:""}.fa-houzz:before{content:""}.fa-vimeo:before{content:""}.fa-black-tie:before{content:""}.fa-fonticons:before{content:""}.fa-reddit-alien:before{content:""}.fa-edge:before{content:""}.fa-credit-card-alt:before{content:""}.fa-codiepie:before{content:""}.fa-modx:before{content:""}.fa-fort-awesome:before{content:""}.fa-usb:before{content:""}.fa-product-hunt:before{content:""}.fa-mixcloud:before{content:""}.fa-scribd:before{content:""}.fa-pause-circle:before{content:""}.fa-pause-circle-o:before{content:""}.fa-stop-circle:before{content:""}.fa-stop-circle-o:before{content:""}.fa-shopping-bag:before{content:""}.fa-shopping-basket:before{content:""}.fa-hashtag:before{content:""}.fa-bluetooth:before{content:""}.fa-bluetooth-b:before{content:""}.fa-percent:before{content:""}.fa-gitlab:before{content:""}.fa-wpbeginner:before{content:""}.fa-wpforms:before{content:""}.fa-envira:before{content:""}.fa-universal-access:before{content:""}.fa-wheelchair-alt:before{content:""}.fa-question-circle-o:before{content:""}.fa-blind:before{content:""}.fa-audio-description:before{content:""}.fa-volume-control-phone:before{content:""}.fa-braille:before{content:""}.fa-assistive-listening-systems:before{content:""}.fa-american-sign-language-interpreting:before,.fa-asl-interpreting:before{content:""}.fa-deaf:before,.fa-deafness:before,.fa-hard-of-hearing:before{content:""}.fa-glide:before{content:""}.fa-glide-g:before{content:""}.fa-sign-language:before,.fa-signing:before{content:""}.fa-low-vision:before{content:""}.fa-viadeo:before{content:""}.fa-viadeo-square:before{content:""}.fa-snapchat:before{content:""}.fa-snapchat-ghost:before{content:""}.fa-snapchat-square:before{content:""}.fa-pied-piper:before{content:""}.fa-first-order:before{content:""}.fa-yoast:before{content:""}.fa-themeisle:before{content:""}.fa-google-plus-circle:before,.fa-google-plus-official:before{content:""}.fa-fa:before,.fa-font-awesome:before{content:""}.fa-handshake-o:before{content:""}.fa-envelope-open:before{content:""}.fa-envelope-open-o:before{content:""}.fa-linode:before{content:""}.fa-address-book:before{content:""}.fa-address-book-o:before{content:""}.fa-address-card:before,.fa-vcard:before{content:""}.fa-address-card-o:before,.fa-vcard-o:before{content:""}.fa-user-circle:before{content:""}.fa-user-circle-o:before{content:""}.fa-user-o:before{content:""}.fa-id-badge:before{content:""}.fa-drivers-license:before,.fa-id-card:before{content:""}.fa-drivers-license-o:before,.fa-id-card-o:before{content:""}.fa-quora:before{content:""}.fa-free-code-camp:before{content:""}.fa-telegram:before{content:""}.fa-thermometer-4:before,.fa-thermometer-full:before,.fa-thermometer:before{content:""}.fa-thermometer-3:before,.fa-thermometer-three-quarters:before{content:""}.fa-thermometer-2:before,.fa-thermometer-half:before{content:""}.fa-thermometer-1:before,.fa-thermometer-quarter:before{content:""}.fa-thermometer-0:before,.fa-thermometer-empty:before{content:""}.fa-shower:before{content:""}.fa-bath:before,.fa-bathtub:before,.fa-s15:before{content:""}.fa-podcast:before{content:""}.fa-window-maximize:before{content:""}.fa-window-minimize:before{content:""}.fa-window-restore:before{content:""}.fa-times-rectangle:before,.fa-window-close:before{content:""}.fa-times-rectangle-o:before,.fa-window-close-o:before{content:""}.fa-bandcamp:before{content:""}.fa-grav:before{content:""}.fa-etsy:before{content:""}.fa-imdb:before{content:""}.fa-ravelry:before{content:""}.fa-eercast:before{content:""}.fa-microchip:before{content:""}.fa-snowflake-o:before{content:""}.fa-superpowers:before{content:""}.fa-wpexplorer:before{content:""}.fa-meetup:before{content:""}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.sr-only-focusable:active,.sr-only-focusable:focus{position:static;width:auto;height:auto;margin:0;overflow:visible;clip:auto}body,html{overflow:hidden;height:100%}body{margin:0;padding:64px 0 0;font-family:'Open Sans',sans-serif;font-size:16px;font-weight:300;line-height:1.6;overflow:auto}h1,h2{font-family:"Roboto","Helvetica Neue",sans-serif}h1,h2,h3{font-weight:400}h1 code,h2 code,h3 code{background:0 0;padding:0;font-size:100%;color:inherit;background-color:none;font-family:inherit}h1,h2,h3,li,p,ul{word-break:break-word}pre,pre code{display:block;color:#333}pre{margin:0 0 10px;line-height:1.42857143;word-break:break-all;word-wrap:break-word;background-color:#f5f5f5;border:1px solid #ccc;border-radius:4px;padding:9.5px;font-size:13px}pre code{overflow-x:auto;padding:.5em;background:0 0;-webkit-text-size-adjust:none;font-size:100%}.diffbox pre,table code{padding:0;background-color:none}.diffbox pre{display:block;margin:0;line-height:1.42857143;word-break:break-all;word-wrap:break-word;border:none;border-radius:0;font-size:13px;color:#333}code,code a{color:#c7254e}code{white-space:pre-wrap;padding:2px 4px;font-size:90%;background-color:#f9f2f4;border-radius:4px}code a{text-decoration:underline;transition:all .2s}code a:hover{color:#222}table{max-width:100%;overflow-x:scroll;border:1px solid #ddd;border-spacing:0;border-collapse:collapse;display:inline-block}table code{background:0 0;font-size:100%;color:inherit}td,th{padding:10px}th{background:#f1f1f1;text-align:left}td+td,th+th{border-left:1px solid #eee}td{border-top:1px solid #eee;vertical-align:top}img[alt=angular1-wa-ionic-cli],img[alt=angular1-wa-meteor-cli]{width:30%}.side-nav .api-list-item,.side-nav .step-item{margin:0;padding:0;color:#546e7a}.side-nav .step-item{position:relative}.side-nav .step-item::before{content:"";height:10px;width:10px;background:#f9f9f9;border-radius:50%;border:2px solid #a6120d;position:absolute;top:50%;margin-top:-6px;left:32px;margin-left:-6px;z-index:200;transition:all .2s ease-in-out}.side-nav .step-item.active-step::before,.side-nav .step-item:hover::before{background:#dd1b16;border-color:#dd1b16}.side-nav .active-step a,.side-nav .step-item:hover .step-link{color:#dd1b16}.side-nav .step-item::after{content:"";height:100%;width:1px;background:#a6120d;top:0;left:32px;position:absolute;z-index:100}.side-nav .step-item:first-of-type::after{height:50%;top:50%}.side-nav .step-item:last-of-type::after{height:50%;bottom:50%}.side-nav .step-link{color:#a6120d;transition:ease-in-out;text-decoration:none;display:block;font-size:14px;padding:16px 16px 16px calc(16px + 48px);margin:0}.side-nav .apis-list,.side-nav .apis-versions-list,.side-nav .tutorial-steps-list{list-style:none;padding-left:0;margin-top:8px}.apis-versions-list{margin:0!important}.apis-versions-list li{padding:0}.apis-versions-list li a{text-decoration:underline;color:#000}.dropdown-content{-moz-column-count:2;-moz-column-width:220px;-moz-column-rule:1px solid #eceff1;-moz-column-gap:0;column-count:2;column-width:220px;column-rule:1px solid #eceff1;column-gap:0}.dropdown-content .tutorial-steps-list{margin:0!important;list-style:none;padding:0}.dropdown-content .tutorial-steps-list .step-item{padding:5px 0 5px 10px;break-inside:avoid-column}.dropdown-content .tutorial-steps-list .step-item a{text-decoration:none;font-size:small;color:#000}.dropdown-content .tutorial-steps-list .step-item .bold{font-weight:700}[md-button].md-primary{background:0 0!important;color:#fff!important;cursor:pointer!important;border:2px solid #fff!important;border-radius:3px solid #fff!important;font-weight:400!important}[md-button].md-primary:hover{color:#fff!important;background-color:rgba(0,0,0,.1)!important}[md-button].md-primary[disabled]{color:#d3d3d3!important;cursor:not-allowed!important}[md-button]::after{display:none!important}.tutorial-button{border:2px solid #a6120d;background:0 0!important;color:#a6120d!important;box-shadow:none!important;padding:0 10px!important;margin-bottom:10px!important;transition:all .2s ease-in-out!important}.tutorial-button[disabled]{border-color:#dedede!important;color:#aaa!important;background:#dedede!important}.tutorial-button:hover{background:#dd1b16!important;color:#fff!important;border:2px solid #dd1b16!important}.tutorial-button.active{background:#a6120d!important;color:#fff!important;border:2px solid #a6120d!important}tutorial-page-content pre code[ngnonbindable]{background:#eee;display:block;width:90%;border-radius:5px;padding:10px}tutorial-page-content blockquote{margin:0;position:relative;background:#eee;border-radius:5px}tutorial-page-content blockquote:before{content:'!';font-weight:700;position:absolute;vertical-align:top;font-size:2vw;color:#fff;margin-left:6px}tutorial-page-content blockquote p{border-left:1px solid #fff;padding:10px;margin-left:20px}.diffbox{border-radius:10px}.diffbox .title-panel{border-radius:10px 10px 0 0}.diffbox .code-container{border-radius:0 0 10px 10px}api-ref-container p code,api-ref-container ul li code{font-family:'Open Sans',sans-serif}api-ref-container a{color:#263238;text-decoration:none;font-weight:700}api-ref-container h3{background:#eee;border-radius:5px;padding:4px;margin-top:30px}api-ref-container table{width:100%;background:#eee;border-radius:5px;border-spacing:0}api-ref-container table thead{color:#eee}api-ref-container table thead,api-ref-container table thead tr{background:#546e7a;border-radius:5px}api-ref-container table thead tr th{padding:6px}api-ref-container table tbody td{padding:5px}.l-pinned-top{position:fixed;top:0;left:0;right:0}.l-left{float:left}.l-right{float:right}.docs-content,.l-relative{position:relative}.l-absolute{position:absolute}.l-fixed{position:fixed}.l-offset-side-nav{padding-left:232px}diffbox-container{padding-left:36px;overflow:hidden;display:block}diffbox-container .hljs-comment{color:#777}diffbox-container pre{margin:0;padding:0;background-color:transparent}.side-nav{background:#f6f6f6;width:100%;bottom:0;z-index:100}.side-nav ul{margin-top:8px}.side-nav h1{padding:16px 0 0 32px}@media screen and (min-width:750px){.api-container,.tutorials-container{margin-top:40px}.api-container,.tutorial-inner-container{display:flex}.side-nav{width:40%;height:100%}.api-content,.tutorial-content{width:60%}[md-raised-button]{margin-bottom:0!important}}@media screen and (min-width:1000px){.api-container,.tutorials-container{width:80%;margin:40px auto 0}.top-navigation{display:flex;justify-content:space-between}.side-nav{width:25%;border-radius:2px}.api-content,.tutorial-content{max-width:75%;margin-left:30px}}.api-container,.api-container p,.tutorials-container,.tutorials-container p{color:#555}.api-container h1,.tutorials-container h1{font-family:"Roboto","Helvetica Neue",sans-serif;color:#111;line-height:1.1}.main-toolbar md-toolbar-row{height:auto!important;justify-content:space-between;flex-wrap:wrap}.nav-links [md-button]{min-width:0!important;font-weight:300!important;font-family:inherit!important}.nav-links .md-primary{color:#555!important}diffbox-container pre.line-added{background:#eaffea}diffbox-container pre.line-removed{background:#ff9ea2}.terminal-input{font-size:13px;font-family:monospace;background:0 0;border:none;color:#333;outline:none;margin-left:4.5px;margin-top:5px;resize:none}.anchor-offset{display:block;position:relative;top:-90px;visibility:hidden}.improve-code a{color:#000;padding:6px}.logo{width:auto;height:2em}@keyframes pulse{0%,to{transform:scale(1)}20%,80%{transform:scale(1.2)}50%{transform:scale(.9)}}.support-link button{padding-right:0!important}.support-link .notification{animation:pulse 1.5s 2;font-size:10px;color:#fff;background:rgba(255,0,0,.7);border-radius:50%;display:inline-block;height:18px;width:18px;text-align:center;line-height:20px;font-weight:700}.support-link .hide-support{visibility:hidden}.logo-link{line-height:0;padding:.5rem}.nav-links{width:100%;max-height:340px;overflow:scroll;transition:all .2s ease-in-out;position:relative;z-index:50;height:0}.nav-links.visible{height:340px}[md-icon-button].nav-toggle{border-radius:5px;border:1px solid rgba(0,0,0,.05);height:auto;width:auto;padding:5px 10px}[md-icon-button].nav-toggle::after{display:none}[md-icon-button].nav-toggle span{color:#333}.primary-nav{margin-top:10px}.main-toolbar{position:fixed;top:0;left:0;right:0;padding:0;background:#f6f6f6!important;overflow:hidden;z-index:500}.main-toolbar a{color:#555;text-decoration:none;font-weight:400;display:block}.nav-links{padding-right:120px}.nav-links a{padding:5px 0;border-radius:3px}.nav-links a:hover{background:#eee}.tutorials-dropdown{position:relative;display:inline-block;color:#555;padding:5px 0;line-height:1}.tutorials-dropdown .button-inner{display:flex;align-items:center}.tutorials-dropdown .dropdown-content{display:none;background-color:#fff;padding:7px;line-height:1.6}.tutorials-dropdown .dropdown-content.visible{display:block}@media screen and (min-width:1000px){.nav-links,.primary-nav{display:flex;align-items:center}.primary-nav{margin-top:0}[md-icon-button].nav-toggle{display:none}.nav-links{justify-content:space-between;width:100%;height:auto;overflow:visible}.nav-links a{display:inline-block}.secondary-nav{align-self:flex-end}.main-toolbar{overflow:visible}.main-toolbar md-toolbar-row{flex-wrap:nowrap}.tutorials-dropdown:hover{background:#eee}.tutorials-dropdown .dropdown-content{display:none;position:absolute;background-color:#fff;min-width:600px;box-shadow:0 6px 12px rgba(0,0,0,.175);border-radius:0;padding:5px 0!important;border:1px solid rgba(0,0,0,.15)}.tutorials-dropdown .dropdown-content a{padding:.4rem 20px;border-bottom:1px solid #f2f2f2;display:block;font-weight:300;font-size:16px}.tutorials-dropdown .dropdown-content .tutorial-steps-list .step-item{padding:0}}.clear{clear:both}p{font-size:1rem}.row{overflow:hidden}.hero{padding:3rem 0;background-image:url(assets/images/angular-bg.png);background-color:#333;text-align:center}.hero h1{color:#f6f6f6}.hero .buttons{margin-bottom:20px}.hero .main-logo{width:260px;height:260px;background-image:url(assets/images/logo-large.png);background-repeat:no-repeat;margin:0 auto 3rem;background-size:132%;background-position:-48px}[md-button].body-button,[md-raised-button].hero-button{font-weight:300;transition:all .2s;font-family:inherit;font-size:16px}[md-raised-button].hero-button{background:#a6120d;margin:5px;border:2px solid #fff;color:#fff}[md-button].body-button:hover,[md-raised-button].hero-button:hover{background:#dd1b16;border-color:#dd1b16}[md-button].body-button{background:0 0;border:2px solid #a6120d;color:#a6120d}[md-button].body-button:hover{color:#fff}.hero h1,.showcase h1,.video h1{font-size:1.7rem;line-height:1.4}.video h1{margin:3rem}.video{padding-bottom:2rem}.showcase h1{margin-bottom:3rem;margin-top:0}.main-unit{text-align:center;margin:0 auto}.main-unit .video-wrapper iframe{border:2px solid #333;background-color:#333;border-radius:3px}.main-unit .tutorial-cta{margin:3rem auto 2rem;max-width:400px}.container{padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto;text-align:center;margin-bottom:30px}.showcase .row{padding:0 3rem}.showcase .submit-app-cta{width:100%;float:left}.showcase .img-container{overflow:hidden;margin-bottom:15px;border-radius:5px;border:1px solid #dedede}.showcase .site-title{display:inline-block;padding:5px 20px;border-radius:5px;transition:all .5s}.showcase a:not(.btn){color:#536e7a}.showcase a:not(.btn):hover img{opacity:.5;transform:scale(1.15)}.showcase a:not(.btn):hover .site-title{background:#fff}.showcase img{width:100%;transition:all .5s}.sites{display:flex;flex-wrap:wrap;padding:0 2rem}.site{margin-bottom:30px;width:100%;box-sizing:border-box}.extras .container{display:flex;justify-content:space-between;flex-wrap:wrap}.unit,.unit p{text-align:center}.unit{width:100%;max-width:80%;margin:0 auto;padding:0 2rem;box-sizing:border-box}.unit p{font-size:16px}@media screen and (min-width:620px){.sites{padding:0}.site{padding:0 1rem}.video-wrapper iframe{width:500px;height:calc(500px*.5625)}.site,.unit{width:50%}}@media screen and (min-width:980px){.site{width:33.33%;padding:0 1rem}.video-wrapper iframe{width:700px;height:calc(700px*.5625)}}@media screen and (min-width:1200px){.site{width:25%;padding:0 1rem}.unit{width:33.33%}}.small-hero{color:#263238;padding:2rem;height:440px}.small-hero img{margin:1rem;height:148px}.small-hero p{max-width:240px;margin:1rem auto}.intro{padding-bottom:3rem;padding-top:3rem;background-color:#f2f2f2;margin:3rem auto;overflow:hidden}.intro h1{margin-bottom:4rem}.slides .slide-item{float:left;width:100%}.submit-app-cta p{margin:3rem auto 2rem;max-width:400px;text-align:center}@media screen and (min-width:768px){.slides .slide-item{width:50%}.showcase h1,.video h1{font-size:2rem}.container{width:80%}}a{text-decoration:none}.md-primary{background:#fff}.meteor-rxjs img{vertical-align:middle}.meteor-rxjs .plus{margin-left:0;margin-right:20px;font-weight:bolder}.meteor-rxjs .md-primary{margin:10px}.meteor-rxjs .container{color:#000}.meteor-rxjs .main-unit{background:#fff!important;color:#fff}.meteor-rxjs h1,.meteor-rxjs img{margin-bottom:1rem}.meteor-rxjs>p{max-width:480px;margin:2rem auto}.meteor-rxjs .header{text-align:center;padding-bottom:100px}.meteor-rxjs .header p{font-size:1.2rem;margin:0 auto 1rem}.api-content a{text-decoration:underline;color:#a6120d;transition:all .2s}.api-content a:hover{color:#222}.api-container .side-nav a{color:#222;transition:all .2s}.api-container .side-nav a:hover,ul.apis-list .api-item-link:hover{color:#dd1b16}.api-container .active-step a{color:#a6120d}.dropdown{position:relative;display:inline-block;margin-left:24px;margin-right:24px;margin-top:10px}.dropdown .dropdown-content{display:none;position:absolute;background-color:#fff;box-shadow:0 8px 16px 0 rgba(0,0,0,.2);border-radius:5px;column-width:210px!important;column-count:1!important;font-size:1rem;width:100%}.dropdown .dropdown-content a{display:block;padding:8px}.dropdown .dropdown-content a:hover{background:#f2f2f2}.dropdown .dropdown-content li{border-bottom:1px solid #f2f2f2}tutorials-versions{text-align:center!important;margin-left:0;margin-top:10px;display:block}.dropdown:hover .dropdown-content{display:block}.api-content{margin-top:20px;padding:20px}[md-button].api-button{color:#333;border:none;text-align:left;display:inline-block;background:#d5d5d5;display:inline-flex;align-items:center;margin-top:16px}ul.apis-list{padding:16px 24px!important;border-top:1px solid #d5d5d5;margin-top:32px!important}ul.apis-list .api-item-link{display:block;font-size:16px;padding:8px 0;transition:all .2s}.api-content .deprecation-notice{background:#ffeaea;padding:1rem 1rem 1rem 65px;position:relative;border:2px solid #a53a3a;color:#a53a3a;border-radius:4px}.api-content .deprecation-notice::before{content:"error_outline";font-family:'Material Icons';width:65px;height:100%;position:absolute;top:0;left:0;font-style:normal;line-height:1;font-size:36px;display:flex;align-items:center;justify-content:center;color:#a53a3a}@media screen and (min-width:1000px){.api-content{margin-top:0;padding-top:0}.top-navigation{margin-top:20px;margin-bottom:60px}}markdown-file{padding:2rem;display:block}markdown-file hr{border:0;border-top:1px solid #dedede;margin:45px 0}@media screen and (min-width:750px){markdown-file{width:70%;margin:2rem auto}}@media screen and (min-width:1000px){markdown-file{width:50%}}.version-timeline .timeline{white-space:nowrap;overflow-x:scroll;padding:30px 0 10px;position:relative}.version-timeline .diff,.version-timeline .entry{display:inline-block;position:relative;text-align:center;border-radius:3px}.version-timeline .entry{padding:3px;background:#fff;color:#a6120d;border:1px solid #a6120d;margin-right:5px;margin-left:5px;vertical-align:top;font-size:10px;min-width:100px}.version-timeline .diff:after,.version-timeline .diff:before{visibility:hidden}.version-timeline .diff{min-width:initial!important;vertical-align:middle;font-size:9px;height:100%}.version-timeline .diff md-icon{height:auto!important}.tutorial-title .gh-link a,.version-timeline .diff a{color:#000}.version-timeline .diff,.version-timeline .diff:hover{background:0 0!important;color:#000!important}.version-timeline .current-version:after{background:#a6120d!important}.version-timeline .current-version,.version-timeline .entry:hover{background:#a6120d!important;color:#fff!important}.version-timeline .current-version h1,.version-timeline .entry:hover h1{color:#fff!important;font-weight:700!important}.version-timeline .current-version h4,.version-timeline .entry:hover h4{color:rgba(255,255,255,.56)!important}.version-timeline .entry:after{content:'';display:block;background:#eee;width:7px;height:7px;border-radius:6px;border:3px solid #a6120d;position:absolute;left:50%;top:-30px;margin-left:-7px}.version-timeline .entry:before{content:'';display:block;background:#a6120d;width:3px;height:20px;position:absolute;left:50%;top:-20px;margin-left:-2px}.version-timeline .entry h1{color:#a6120d;font-size:12px;margin-top:2px;margin-bottom:2px}.version-timeline .entry h4{margin:0;color:rgba(156,156,156,.56);font-weight:400}.version-timeline .bar{height:4px;background:#eee;width:100%;position:relative;top:10px;left:0}.tutorial-name{width:100%;border-bottom:1px #fff solid;padding:5px;text-align:center}.top-navigation{width:100%;z-index:50;margin-bottom:20px}.tutorial-content{margin-top:20px;padding:20px}.tutorial-nav{display:flex;align-items:center;margin-bottom:20px}.tutorial-nav a{font-size:13px;margin-right:10px}.improve{display:block}.tutorial-title{font-family:"Roboto","Helvetica Neue",sans-serif}.tutorial-title h1{text-align:center;margin-top:0;margin-bottom:10px}.tutorial-title h4{font-style:italic}.tutorial-title .gh-link,.tutorial-title h4{text-align:center;margin-top:0;margin-bottom:0}.tutorial-content blockquote{background:#fffbd8;margin:0;padding:0 1rem;font-size:.8rem;border:1px solid #d6d095;border-radius:4px;position:relative;padding-left:65px}.tutorial-content blockquote::before{content:"priority_high";font-size:36px;color:#c6b81d}.deprecated-tutorial,.zip-download{display:block;position:relative;border-radius:4px}.zip-download{margin-bottom:2rem;background:#fff;border:2px solid #bcd196;padding:1rem 1rem 1rem 65px;color:#789b37}.zip-download:hover{background:#f6ffe8}.deprecated-tutorial::before,.tutorial-content blockquote::before,.zip-download::before{font-family:'Material Icons';width:65px;height:100%;position:absolute;top:0;left:0;font-style:normal;line-height:1;display:flex;align-items:center;justify-content:center}.zip-download::before{color:#bcd196;content:"file_download";font-size:36px}.deprecated-tutorial{font-size:small;color:#a6120d;background:rgba(209,9,0,.02);padding:5px 5px 5px 65px;width:60%;margin:10px auto 15px}.deprecated-tutorial::before{content:"priority_high";font-size:24px;color:rgba(209,9,0,.5)}.youtube-container{border:1px solid #ccc}@media screen and (min-width:1000px){.tutorial-nav{padding:0;margin-bottom:0}.tutorial-content{margin-top:0;padding-top:0}.top-navigation{margin-top:20px;margin-bottom:60px}}.button-wrapper{display:flex;align-items:center;justify-content:center}.button-wrapper .material-icons{font-size:16px;padding-right:5px}.button-wrapper.right-icon .material-icons{padding-right:0;padding-left:10px}.tutorial-version{margin-left:16px}.active{color:#b3e5fc!important}.main-unit{background:#fff;color:#000;margin-top:10px}.support-page-wrapper{display:table;width:90%;border:1px solid #dadada;background:#f7f7f7;box-shadow:0 1px 2px 0 rgba(0,0,0,.1);border-radius:4px;margin:0 auto 40px}.support-page-wrapper .title{width:100%;display:table-caption;text-align:center;margin-bottom:30px}.support-page-wrapper .row{display:table-row;width:100%;margin-top:20px}.support-page-wrapper .row .divider{border-right:1px solid #dadada}.support-page-wrapper .row .column,.support-page-wrapper .row .full-column{width:50%;display:table-cell;padding-left:30px;padding-right:30px}.support-page-wrapper .row .full-column{width:100%}.support-page-wrapper .row .column .italic,.support-page-wrapper .row .full-column .italic{font-style:italic}.support-page-wrapper .row .column h2,.support-page-wrapper .row .full-column h2{letter-spacing:-.06em;text-align:center;margin-bottom:20px;color:#a6120d}.support-page-wrapper .row .full-column p{max-width:none}.img-title{margin:0 auto}.img-title,.title{text-align:center}.navigationButtons{text-align:center;margin-top:20px;margin-bottom:20px}.tutorial-links{margin-top:10px}.not-found-title,.tutorial-links{text-align:center}.not-found-circle{height:200px;background:#a6120d;width:200px;margin:0 auto;vertical-align:middle;line-height:200px;text-align:center;border-radius:200px;color:#fff;font-size:4em;font-weight:700}.not-found-links{text-align:center;width:100%}</style><universal-script><script>
 try {window.UNIVERSAL_CACHE = ({"APP_ID":"bcf0"}) || {};} catch(e) {  console.warn("Angular Universal: There was a problem parsing data from the server")}
</script></universal-script></body></html>